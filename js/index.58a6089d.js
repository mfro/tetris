(function(e){function t(t){for(var r,i,a=t[0],u=t[1],c=t[2],d=0,s=[];d<a.length;d++)i=a[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&s.push(o[i][0]),o[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);f&&f(t);while(s.length)s.shift()();return l.push.apply(l,c||[]),n()}function n(){for(var e,t=0;t<l.length;t++){for(var n=l[t],r=!0,a=1;a<n.length;a++){var u=n[a];0!==o[u]&&(r=!1)}r&&(l.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},o={index:0},l=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],u=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var f=u;l.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0074":function(e,t,n){},1058:function(e,t,n){"use strict";n("5e0c")},"162c":function(e,t,n){},"17c2":function(e,t,n){e.exports={root:"config-number_root_1JO2c"}},"1f42":function(e,t,n){"use strict";n("162c")},"292c":function(e,t,n){"use strict";n("0074")},"2c01":function(e,t,n){e.exports=n.p+"img/tetrio.f8eaf703.png"},3315:function(e,t,n){"use strict";n("eadd")},"3c4c":function(e,t,n){"use strict";var r=n("17c2"),o=n.n(r);n.d(t,"default",(function(){return o.a}))},4232:function(e,t,n){e.exports=n.p+"img/tetrio-bg.bfe283a4.png"},"5e0c":function(e,t,n){},7129:function(e,t,n){e.exports={root:"config-boolean_root_3o7bx"}},cbc2:function(e,t,n){"use strict";n("81b1");var r=n("fee1");n.d(t,"a",(function(){return r["a"]})),n.d(t,"b",(function(){return r["b"]})),n.d(t,"c",(function(){return r["c"]})),n.d(t,"d",(function(){return r["d"]})),n.d(t,"e",(function(){return r["e"]})),n.d(t,"f",(function(){return r["f"]})),n.d(t,"g",(function(){return r["g"]})),n.d(t,"h",(function(){return r["h"]})),n.d(t,"i",(function(){return r["i"]})),n.d(t,"j",(function(){return r["j"]})),n.d(t,"k",(function(){return r["k"]})),n.d(t,"l",(function(){return r["l"]})),n.d(t,"m",(function(){return r["m"]})),n.d(t,"n",(function(){return r["n"]})),n.d(t,"o",(function(){return r["o"]})),n.d(t,"p",(function(){return r["p"]})),n.d(t,"q",(function(){return r["q"]})),n.d(t,"r",(function(){return r["r"]})),n.d(t,"s",(function(){return r["s"]})),n.d(t,"t",(function(){return r["t"]})),n.d(t,"u",(function(){return r["u"]})),n.d(t,"v",(function(){return r["v"]})),n.d(t,"w",(function(){return r["w"]})),n.d(t,"x",(function(){return r["x"]})),n.d(t,"y",(function(){return r["y"]})),n.d(t,"z",(function(){return r["z"]})),n.d(t,"A",(function(){return r["A"]})),n.d(t,"B",(function(){return r["B"]})),n.d(t,"C",(function(){return r["C"]})),n.d(t,"D",(function(){return r["D"]})),n.d(t,"E",(function(){return r["E"]})),n.d(t,"F",(function(){return r["F"]})),n.d(t,"G",(function(){return r["G"]})),n.d(t,"H",(function(){return r["H"]})),n.d(t,"I",(function(){return r["I"]})),n.d(t,"J",(function(){return r["J"]}));n("669d")},cd49:function(e,t,n){"use strict";n.r(t);n("fd85"),n("15db"),n("c026"),n("4031");var r=n("cbc2"),o=n("34c7"),l=Object(r["J"])("data-v-09199f64");Object(r["s"])("data-v-09199f64");var i=Object(r["i"])("settings"),a=Object(r["j"])("span",null,"User preferences",-1);Object(r["q"])();var u=l((function(e,t,n,o,u,c){var f=Object(r["x"])("edit-config"),d=Object(r["x"])("v-dialog"),s=Object(r["x"])("v-icon"),b=Object(r["x"])("v-button"),m=Object(r["x"])("v-flex"),j=Object(r["x"])("room"),v=Object(r["x"])("joining"),p=Object(r["x"])("landing"),O=Object(r["x"])("v-app");return Object(r["p"])(),Object(r["f"])(O,{"align-center":"",class:"pb-6 root"},{default:l((function(){return[Object(r["j"])(d,{"model-value":o.editing_user},{default:l((function(){return[Object(r["j"])(f,{kind:"user",modelValue:o.user_prefs,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.user_prefs=e}),onClose:t[2]||(t[2]=function(e){return o.editing_user=!1})},null,8,["modelValue"])]})),_:1},8,["model-value"]),Object(r["j"])(m,{class:"user pa-4"},{default:l((function(){return[Object(r["j"])(b,{onClick:t[3]||(t[3]=function(e){return o.editing_user=!0})},{default:l((function(){return[Object(r["j"])(s,{class:"mr-3"},{default:l((function(){return[i]})),_:1}),a]})),_:1})]})),_:1}),null!=o.current_room?(Object(r["p"])(),Object(r["f"])(j,{key:0,room:o.current_room},null,8,["room"])):null!=o.joining_code?(Object(r["p"])(),Object(r["f"])(v,{key:1,code:o.joining_code,onRoom:t[4]||(t[4]=function(e){return o.current_room=e})},null,8,["code"])):(Object(r["p"])(),Object(r["f"])(p,{key:2,onRoom:t[5]||(t[5]=function(e){return o.current_room=e})}))]})),_:1})})),c=(n("241c"),n("84ca"),n("5a85"),n("534d"),n("f432"),Object(r["i"])("Game rules")),f=Object(r["i"])("User preferences"),d=Object(r["i"])("close"),s=Object(r["j"])("span",null,"Save",-1);function b(e,t,n,o,l,i){var a=Object(r["x"])("v-text"),u=Object(r["x"])("v-grow"),b=Object(r["x"])("v-icon"),m=Object(r["x"])("v-button"),j=Object(r["x"])("config-game-rules"),v=Object(r["x"])("config-user-prefs"),p=Object(r["x"])("v-card");return Object(r["p"])(),Object(r["f"])(p,{style:{"min-width":"60ch"}},{title:Object(r["G"])((function(){return["game"==n.kind?(Object(r["p"])(),Object(r["f"])(a,{key:0,title:""},{default:Object(r["G"])((function(){return[c]})),_:1})):Object(r["g"])("",!0),"user"==n.kind?(Object(r["p"])(),Object(r["f"])(a,{key:1,title:""},{default:Object(r["G"])((function(){return[f]})),_:1})):Object(r["g"])("",!0),Object(r["j"])(u),Object(r["j"])(m,{icon:"",small:"",onClick:t[1]||(t[1]=function(t){return e.$emit("close")})},{default:Object(r["G"])((function(){return[Object(r["j"])(b,null,{default:Object(r["G"])((function(){return[d]})),_:1})]})),_:1})]})),actions:Object(r["G"])((function(){return[Object(r["j"])(u),Object(r["j"])(m,{color:"primary",onClick:t[4]||(t[4]=function(e){return o.save()})},{default:Object(r["G"])((function(){return[s]})),_:1})]})),default:Object(r["G"])((function(){return["game"==n.kind?(Object(r["p"])(),Object(r["f"])(j,{key:0,modelValue:o.value,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.value=e})},null,8,["modelValue"])):Object(r["g"])("",!0),"user"==n.kind?(Object(r["p"])(),Object(r["f"])(v,{key:1,modelValue:o.value,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.value=e})},null,8,["modelValue"])):Object(r["g"])("",!0)]})),_:1})}function m(e,t,n,o,l,i){var a=Object(r["x"])("config-rational"),u=Object(r["x"])("config-number"),c=Object(r["x"])("config-select");return Object(r["p"])(),Object(r["f"])(r["a"],null,[Object(r["j"])(a,{name:"Gravity",description:"Gravity for falling pieces (tiles per frame)",modelValue:o.gravity,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.gravity=e}),filter:function(e){return e<=20}},null,8,["modelValue","filter"]),Object(r["j"])(u,{name:"Lock delay",description:"Delay after touching the ground before a piece locks down (frames)",modelValue:o.lock_delay,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.lock_delay=e}),filter:function(e){return e>=0}},null,8,["modelValue","filter"]),Object(r["j"])(u,{name:"Move reset limit",description:"Maximum number of times the lock delay can be reset by successful shifts or rotates",modelValue:o.move_reset_limit,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.move_reset_limit=e}),filter:function(e){return e>=0}},null,8,["modelValue","filter"]),Object(r["j"])(u,{name:"Preview size",description:"Number of pieces in the preview",modelValue:o.bag_preview,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.bag_preview=e}),filter:function(e){return e>=0&&e<=6}},null,8,["modelValue","filter"]),Object(r["j"])(c,{name:"Wall kick style",description:"Wall kick configuration to use for rotations",modelValue:o.wall_kicks,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.wall_kicks=e}),options:o.wallKickOptions},null,8,["modelValue","options"])],64)}var j,v,p,O=n("98ad"),g=n("2e1a"),y=(n("862d"),n("b902"),n("966c"),n("d50c"),n("e82c")),_=n("862b"),h=n("c812"),x=function(){function e(t,n){Object(_["a"])(this,e),this.x=t,this.y=n}return Object(h["a"])(e,[{key:"len",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"dir",get:function(){return Math.atan2(this.y,this.x)}}],[{key:"norm",value:function(t){return e.polar(1,t.dir)}},{key:"scale",value:function(t,n){return new e(t.x*n,t.y*n)}},{key:"add",value:function(t,n){return new e(t.x+n.x,t.y+n.y)}},{key:"dot",value:function(e,t){return e.x*t.x+e.y*t.y}},{key:"eq",value:function(e,t){return e.x==t.x&&e.y==t.y}},{key:"delta",value:function(t,n){var r=e.dot(t,n),o=Math.acos(r/t.len/n.len);return t.y*n.x>t.x*n.y?-o:o}},{key:"polar",value:function(t,n){return new e(Math.cos(n)*t,Math.sin(n)*t)}}]),e}();function w(e){return{type:"constant",value:e}}function k(e){return{type:"optional",inner:e}}function V(e,t){return{type:"natural",name:e,description:t}}function z(e,t){return{type:"rational",name:e,description:t}}function S(e,t,n){return{type:"select",name:e,description:t,options:n}}function T(e,t,n){return{type:"object",name:e,description:t,inner:n}}x.zero=new x(0,0),function(e){function t(e,t){for(var n=t.map((function(e){return new x(e[0],e[1])})),r=[n],o=0;o<3;++o)n=n.map((function(t){return new x(e-1-t.y,t.x)})),r.push(n);return{size:e,rotations:r}}e.I=t(4,[[0,1],[1,1],[2,1],[3,1]]),e.O=t(2,[[0,0],[0,1],[1,0],[1,1]]),e.T=t(3,[[1,0],[0,1],[1,1],[2,1]]),e.J=t(3,[[0,0],[0,1],[1,1],[2,1]]),e.L=t(3,[[2,0],[0,1],[1,1],[2,1]]),e.S=t(3,[[1,0],[2,0],[0,1],[1,1]]),e.Z=t(3,[[0,0],[1,0],[1,1],[2,1]]),e.GARBAGE=t(0,[]),e.all=[e.I,e.O,e.T,e.J,e.L,e.S,e.Z]}(j||(j={})),function(e){function t(e){return e.map((function(e){return[x.zero].concat(Object(y["a"])(e.map((function(e){return new x(e[0],-e[1])}))))}))}var n=t([[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]]]),r=t([[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]]]),o=t([[[0,0],[-2,0],[1,0],[-2,-1],[1,2]],[[0,0],[2,0],[-1,0],[2,1],[-1,-2]],[[0,0],[-1,0],[2,0],[-1,2],[2,-1]],[[0,0],[1,0],[-2,0],[1,-2],[-2,1]],[[0,0],[2,0],[-1,0],[2,1],[-1,-2]],[[0,0],[-2,0],[1,0],[-2,-1],[1,2]],[[0,0],[1,0],[-2,0],[1,-2],[-2,1]],[[0,0],[-1,0],[2,0],[-1,2],[2,-1]]]),l=t([[[0,0],[-2,0],[1,0],[1,2],[-2,-1]],[[0,0],[2,0],[-1,0],[2,1],[-1,-2]],[[0,0],[-1,0],[2,0],[-1,2],[2,-1]],[[0,0],[-2,0],[1,0],[-2,1],[1,-1]],[[0,0],[2,0],[-1,0],[2,1],[-1,-1]],[[0,0],[1,0],[-2,0],[1,2],[-2,-1]],[[0,0],[-2,0],[1,0],[-2,1],[1,-2]],[[0,0],[2,0],[-1,0],[-1,2],[2,-1]]]);e.standard=new Map([[j.I,o],[j.O,r],[j.T,r],[j.J,r],[j.L,r],[j.S,r],[j.Z,r]]),e.asira=new Map([[j.I,l],[j.O,r],[j.T,r],[j.J,r],[j.L,r],[j.S,r],[j.Z,r]]),e.none=new Map([[j.I,n],[j.O,n],[j.T,n],[j.J,n],[j.L,n],[j.S,n],[j.Z,n]]),e.all=[e.none,e.standard,e.asira]}(v||(v={})),function(e){function t(e){return{field_size:[e.field_size.x,e.field_size.y],fall_delay:e.fall_delay,lock_delay:e.lock_delay,move_reset_limit:e.move_reset_limit,wall_kicks:v.all.indexOf(e.wall_kicks),bag_preview:e.bag_preview}}function n(e){return{field_size:new x(e.field_size[0],e.field_size[1]),fall_delay:e.fall_delay,lock_delay:e.lock_delay,move_reset_limit:e.move_reset_limit,wall_kicks:v.all[e.wall_kicks],bag_preview:e.bag_preview}}e.save=t,e.load=n}(p||(p={}));w(new x(10,40)),z("Drop Delay","Drop delay for falling pieces (frames per tile)"),z("Lock Delay","Lock down delay (frames)"),k(z("Move Reset Limit","Maximum number of times the Lock Delay can be reset by successful shifts or rotates")),S("Wall Kicks","Wall kick data",[["No Kicks",v.none],["Standard",v.standard],["Asira",v.asira]]),V("Preview Size","Number of pieces in the preview"),k(T("Autoshift","Configure repeated shifts while input is held",{delay:z("Delay","Delay between repeated shifts (frames)"),initial_delay:z("Initial Delay","Delay after first shift before repeating (frames)")})),z("Soft Drop Multiplier","Multiplier for Drop Delay while soft dropping"),n("88f6"),n("932a"),n("0ffc");var G=Object(r["J"])("data-v-632a7c32"),A=G((function(e,t,n,o,l,i){var a=Object(r["x"])("v-input"),u=Object(r["x"])("v-tooltip");return Object(r["p"])(),Object(r["f"])(u,{right:"",text:n.description},{default:G((function(){return[Object(r["j"])(a,{label:n.name,onClick:t[2]||(t[2]=function(t){return e.$refs.select.click()})},{default:G((function(e){var l=e.id;return[Object(r["H"])(Object(r["j"])("select",{id:l,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.value=e}),ref:"select"},[(Object(r["p"])(!0),Object(r["f"])(r["a"],null,Object(r["v"])(n.options,(function(e,t){return Object(r["p"])(),Object(r["f"])("option",{key:e[0],value:t},Object(r["B"])(e[0]),9,["value"])})),128))],8,["id"]),[[r["D"],o.value]])]})),_:1},8,["label"])]})),_:1},8,["text"])})),C=(n("156c"),{name:"config-select",emits:["update:modelValue"],props:{name:String,description:String,modelValue:{},options:Array},setup:function(e,t){var n=t.emit,o=Object(r["d"])({get:function(){return e.options.findIndex((function(t){return t[1]==e.modelValue}))},set:function(t){n("update:modelValue",e.options[t][1])}});return{value:o}}});n("1f42");C.render=A,C.__scopeId="data-v-632a7c32";var U=C;function R(e,t,n,o,l,i){var a=Object(r["x"])("v-text-field"),u=Object(r["x"])("v-tooltip");return Object(r["p"])(),Object(r["f"])(u,{right:"",text:n.description},{default:Object(r["G"])((function(){return[Object(r["j"])(a,{label:n.name,"model-value":o.state.editing,"onUpdate:modelValue":o.onInput,warning:o.state.error},null,8,["label","model-value","onUpdate:modelValue","warning"])]})),_:1},8,["text"])}n("9588"),n("7e9e"),n("f542");var I={name:"config-number",emits:["update:modelValue"],props:{name:String,description:String,modelValue:Number,filter:Function},setup:function(e,t){var n=t.emit,o=Object(r["z"])({editing:null,error:!1});return Object(r["E"])((function(){return e.modelValue}),(function(){o.editing=e.modelValue.toString()}),{immediate:!0}),{state:o,onInput:function(t){o.editing=t;var l=parseFloat(t);l.toString()!=t||e.filter&&!e.filter(l)?o.error=!0:(o.error=!1,Object(r["m"])((function(){return n("update:modelValue",l)})))}}}},M=n("3c4c");const P=I.__cssModules={};P["$style"]=M["default"],I.render=R;var J=I,E=Object(r["J"])("data-v-0ea7d42c");Object(r["s"])("data-v-0ea7d42c");var L=Object(r["i"])("/");Object(r["q"])();var B=E((function(e,t,n,o,l,i){var a=Object(r["x"])("v-text"),u=Object(r["x"])("v-flex"),c=Object(r["x"])("v-input"),f=Object(r["x"])("v-tooltip");return Object(r["p"])(),Object(r["f"])(f,{right:"",text:n.description},{default:E((function(){return[Object(r["j"])(c,{label:n.name,style:{cursor:"text"},onClick:t[4]||(t[4]=function(t){return e.$refs.top.focus()}),warning:o.state.error},{default:E((function(e){var n=e.id;return[Object(r["j"])(u,null,{default:E((function(){return[Object(r["j"])("input",{ref:"top",id:n,style:{width:"3ch"},value:o.state.top,onInput:t[1]||(t[1]=function(e){return o.setTop(e.target.value)})},null,40,["id","value"]),Object(r["j"])(u,{class:"mx-2",column:"","justify-center":""},{default:E((function(){return[Object(r["j"])(a,null,{default:E((function(){return[L]})),_:1})]})),_:1}),Object(r["j"])("input",{onClick:t[2]||(t[2]=Object(r["I"])((function(){}),["stop"])),value:o.state.bot,onInput:t[3]||(t[3]=function(e){return o.setBot(e.target.value)})},null,40,["value"])]})),_:2},1024)]})),_:1},8,["label","warning"])]})),_:1},8,["text"])})),D={name:"config-rational",emits:["update:modelValue"],props:{name:String,description:String,modelValue:Number,filter:Function},setup:function(e,t){var n=t.emit,o=Object(r["z"])({top:null,bot:null,error:!1});return Object(r["E"])((function(){return e.modelValue}),(function(){e.modelValue>1?(o.top=e.modelValue.toString(),o.bot="1"):(o.top="1",o.bot=1/e.modelValue.toString())}),{immediate:!0}),{state:o,setTop:function(t){o.top=t,o.bot="1";var r=parseInt(t,10);r.toString()!=t||e.filter&&!e.filter(r)?o.error=!0:(o.error=!1,n("update:modelValue",r))},setBot:function(t){o.top="1",o.bot=t;var r=1/parseInt(t,10);(1/r).toString()!=t||e.filter&&!e.filter(r)?o.error=!0:(o.error=!1,n("update:modelValue",r))}}}};n("1058");D.render=B,D.__scopeId="data-v-0ea7d42c";var q=D,N=[["No Kicks",v.none],["Standard",v.standard],["Asira",v.asira]];function W(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};return Object(r["d"])({get:function(){return o(t()[n])},set:function(r){var o=Object(g["a"])(Object(g["a"])({},t()),{},Object(O["a"])({},n,l(r)));e("update:modelValue",o)}})}var F={name:"config-game-rules",components:{configSelect:U,configNumber:J,configRational:q},emits:["update:modelValue"],props:{modelValue:Object},setup:function(e,t){var n=t.emit,r=W(n,(function(){return e.modelValue}),"fall_delay",(function(e){return 1/e}),(function(e){return 1/e})),o=W(n,(function(){return e.modelValue}),"lock_delay"),l=W(n,(function(){return e.modelValue}),"move_reset_limit"),i=W(n,(function(){return e.modelValue}),"bag_preview"),a=W(n,(function(){return e.modelValue}),"wall_kicks");return{gravity:r,lock_delay:o,move_reset_limit:l,bag_preview:i,wall_kicks:a,wallKickOptions:N}}};F.render=m;var Z=F;function K(e,t,n,o,l,i){var a=Object(r["x"])("config-autoshift"),u=Object(r["x"])("config-number"),c=Object(r["x"])("config-render");return Object(r["p"])(),Object(r["f"])(r["a"],null,[Object(r["j"])(a,{modelValue:o.autoshift,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.autoshift=e})},null,8,["modelValue"]),Object(r["j"])(u,{name:"Soft drop multiplier",description:"Gravity multiplier when soft dropping",modelValue:o.soft_drop,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.soft_drop=e}),filter:function(e){return e>=0}},null,8,["modelValue","filter"]),Object(r["j"])(c,{modelValue:o.render,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.render=e})},null,8,["modelValue"])],64)}function $(e,t,n,o,l,i){var a=Object(r["x"])("config-number");return Object(r["p"])(),Object(r["f"])(r["a"],null,[Object(r["j"])(a,{name:"Autoshift delay",description:"Delay between repeated shifts while input is held (ARR)",modelValue:o.delay,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.delay=e}),filter:function(e){return e>=0}},null,8,["modelValue","filter"]),Object(r["j"])(a,{name:"Autoshift initial delay",description:"Delay after the initial shift when pressing an input before repeating (DAS)",modelValue:o.initial_delay,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.initial_delay=e}),filter:function(e){return e>=0}},null,8,["modelValue","filter"])],64)}function H(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};return Object(r["d"])({get:function(){return o(t()[n])},set:function(r){var o=Object(g["a"])(Object(g["a"])({},t()),{},Object(O["a"])({},n,l(r)));e("update:modelValue",o)}})}var Q={name:"config-autoshift",components:{configNumber:J},emits:["update:modelValue"],props:{modelValue:Object},setup:function(e,t){var n=t.emit,r=H(n,(function(){return e.modelValue}),"delay"),o=H(n,(function(){return e.modelValue}),"initial_delay");return{delay:r,initial_delay:o}}};Q.render=$;var X=Q;function Y(e,t,n,o,l,i){var a=Object(r["x"])("config-select"),u=Object(r["x"])("config-number"),c=Object(r["x"])("config-boolean");return Object(r["p"])(),Object(r["f"])(r["a"],null,[Object(r["j"])(a,{name:"Render Style",description:"Wall kick configuration to use for rotations",modelValue:o.style,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.style=e}),options:o.styleOptions},null,8,["modelValue","options"]),"v1"==o.style?(Object(r["p"])(),Object(r["f"])(r["a"],{key:0},[Object(r["j"])(u,{name:"Tile size",description:"Size in pixels of each square on the field",modelValue:o.size,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.size=e}),filter:function(e){return e>0}},null,8,["modelValue","filter"]),Object(r["j"])(c,{name:"Smooth rendering",description:"Join tiles of the same tetronimo",modelValue:o.smooth,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.smooth=e})},null,8,["modelValue"]),Object(r["j"])(u,{name:"Border width",description:"Size of the tile border",modelValue:o.border,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.border=e}),filter:function(e){return e>=0&&e<=o.size/2}},null,8,["modelValue","filter"])],64)):Object(r["g"])("",!0),"v2"==o.style?(Object(r["p"])(),Object(r["f"])(r["a"],{key:1},[Object(r["j"])(u,{name:"Tile size",description:"Size in pixels of each square on the field",modelValue:o.size,"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.size=e}),filter:function(e){return e>0}},null,8,["modelValue","filter"]),Object(r["j"])(c,{name:"Smooth rendering",description:"Join tiles of the same tetronimo",modelValue:o.smooth,"onUpdate:modelValue":t[6]||(t[6]=function(e){return o.smooth=e})},null,8,["modelValue"]),Object(r["j"])(u,{name:"Border width",description:"Size of the tile border",modelValue:o.border,"onUpdate:modelValue":t[7]||(t[7]=function(e){return o.border=e}),filter:function(e){return e>=0&&e<=o.size/2}},null,8,["modelValue","filter"]),Object(r["j"])(u,{name:"Ghost opacity",description:"Opacity of the ghost preview",modelValue:o.ghost_opacity,"onUpdate:modelValue":t[8]||(t[8]=function(e){return o.ghost_opacity=e}),filter:function(e){return e>=0&&e<=1}},null,8,["modelValue","filter"])],64)):Object(r["g"])("",!0),"tetrio"==o.style?(Object(r["p"])(),Object(r["f"])(c,{key:2,name:"Ghost color",description:"Color the ghost tile",modelValue:o.ghost_color,"onUpdate:modelValue":t[9]||(t[9]=function(e){return o.ghost_color=e})},null,8,["modelValue"])):Object(r["g"])("",!0)],64)}function ee(e,t,n,o,l,i){var a=Object(r["x"])("v-checkbox"),u=Object(r["x"])("v-input"),c=Object(r["x"])("v-tooltip");return Object(r["p"])(),Object(r["f"])(c,{right:"",text:n.description},{default:Object(r["G"])((function(){return[Object(r["j"])(u,{label:n.name,onClick:t[3]||(t[3]=function(e){return o.value=!o.value})},{default:Object(r["G"])((function(e){var n=e.id;return[Object(r["j"])(a,{id:n,modelValue:o.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.value=e}),onClick:t[2]||(t[2]=Object(r["I"])((function(){}),["stop"]))},null,8,["id","modelValue"])]})),_:1},8,["label"])]})),_:1},8,["text"])}var te={name:"config-boolean",emits:["update:modelValue"],props:{name:String,description:String,modelValue:Boolean},setup:function(e,t){var n=t.emit,o=Object(r["d"])({get:function(){return e.modelValue},set:function(e){return n("update:modelValue",e)}});return{value:o}}},ne=n("e306");const re=te.__cssModules={};re["$style"]=ne["default"],te.render=ee;var oe=te,le=[["toon","v1"],["pixel","v2"],["tetr.io","tetrio"]];function ie(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};return Object(r["d"])({get:function(){return o(t()[n])},set:function(r){var o=Object(g["a"])(Object(g["a"])({},t()),{},Object(O["a"])({},n,l(r)));e("update:modelValue",o)}})}var ae={name:"config-render",components:{configAutoshift:X,configBoolean:oe,configNumber:J,configSelect:U},emits:["update:modelValue"],props:{modelValue:Object},setup:function(e,t){var n=t.emit,r=ie(n,(function(){return e.modelValue}),"size"),o=ie(n,(function(){return e.modelValue}),"smooth"),l=ie(n,(function(){return e.modelValue}),"style"),i=ie(n,(function(){return e.modelValue}),"border"),a=ie(n,(function(){return e.modelValue}),"ghost_opacity"),u=ie(n,(function(){return e.modelValue}),"ghost_color");return{size:r,smooth:o,style:l,border:i,ghost_opacity:a,ghost_color:u,styleOptions:le}}};ae.render=Y;var ue=ae;function ce(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){return e},l=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(e){return e};return Object(r["d"])({get:function(){return o(t()[n])},set:function(r){var o=Object(g["a"])(Object(g["a"])({},t()),{},Object(O["a"])({},n,l(r)));e("update:modelValue",o)}})}var fe={name:"config-game-rules",components:{configAutoshift:X,configNumber:J,configRender:ue},emits:["update:modelValue"],props:{modelValue:Object},setup:function(e,t){var n=t.emit,r=ce(n,(function(){return e.modelValue}),"autoshift"),o=ce(n,(function(){return e.modelValue}),"soft_drop"),l=ce(n,(function(){return e.modelValue}),"render");return{autoshift:r,soft_drop:o,render:l}}};fe.render=K;var de=fe,se={name:"edit-config",components:{configGameRules:Z,configUserPrefs:de},emits:["close","update:modelValue"],props:{kind:String,modelValue:Object},setup:function(e,t){var n=t.emit,o=Object(r["A"])(e.modelValue);return Object(r["E"])((function(){return e.modelValue}),(function(e){return o.value=e})),{value:o,save:function(){n("update:modelValue",o.value),n("close")}}}};se.render=b;var be=se,me=(n("cbc2f"),Object(r["i"])("Tetris Lobby")),je=Object(r["i"])("emoji_events"),ve=Object(r["i"])("settings"),pe=Object(r["j"])("span",null,"Game rules",-1),Oe=Object(r["j"])("span",null,"Start game",-1);function ge(e,t,n,o,l,i){var a=Object(r["x"])("edit-config"),u=Object(r["x"])("v-dialog"),c=Object(r["x"])("v-text"),f=Object(r["x"])("v-grow"),d=Object(r["x"])("clipboard"),s=Object(r["x"])("v-flex"),b=Object(r["x"])("v-icon"),m=Object(r["x"])("v-button"),j=Object(r["x"])("v-card"),v=Object(r["x"])("game");return Object(r["p"])(),Object(r["f"])(r["a"],null,[Object(r["j"])(u,{"model-value":o.editing},{default:Object(r["G"])((function(){return[Object(r["j"])(a,{kind:"game",modelValue:o.game_rules,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.game_rules=e}),onClose:t[2]||(t[2]=function(e){return o.editing=!1})},null,8,["modelValue"])]})),_:1},8,["model-value"]),Object(r["j"])(s,{column:"",grow:"","align-center":"",class:"mt-6"},{default:Object(r["G"])((function(){return[n.room.local?(Object(r["p"])(),Object(r["f"])(s,{key:1},{default:Object(r["G"])((function(){return[Object(r["j"])(v,{value:n.room.local},null,8,["value"]),Object(r["j"])(s,null,{default:Object(r["G"])((function(){return[(Object(r["p"])(!0),Object(r["f"])(r["a"],null,Object(r["v"])(o.others,(function(e){return Object(r["p"])(),Object(r["f"])(v,{key:e,value:e.game},null,8,["value"])})),128))]})),_:1})]})),_:1})):(Object(r["p"])(),Object(r["f"])(j,{key:0},Object(r["h"])({title:Object(r["G"])((function(){return[Object(r["j"])(s,{grow:"","align-start":""},{default:Object(r["G"])((function(){return[Object(r["j"])(c,{title:""},{default:Object(r["G"])((function(){return[me]})),_:1}),Object(r["j"])(f,{class:"mx-6"}),Object(r["j"])(f,{class:"mx-6"}),Object(r["j"])(d,{value:o.link},null,8,["value"])]})),_:1})]})),default:Object(r["G"])((function(){return[Object(r["j"])(s,{column:"",class:"pt-4"},{default:Object(r["G"])((function(){return[(Object(r["p"])(!0),Object(r["f"])(r["a"],null,Object(r["v"])(n.room.members,(function(e){return Object(r["p"])(),Object(r["f"])(s,{key:e,class:"px-4"},{default:Object(r["G"])((function(){return[e.winner?(Object(r["p"])(),Object(r["f"])(b,{key:0,class:"mr-3",style:{color:"#ffc107"}},{default:Object(r["G"])((function(){return[je]})),_:1})):Object(r["g"])("",!0),Object(r["j"])(c,{class:"my-3"},{default:Object(r["G"])((function(){return[Object(r["i"])(Object(r["B"])(e.name),1)]})),_:2},1024)]})),_:2},1024)})),128))]})),_:1})]})),_:2},[0==n.room.index?{name:"actions",fn:Object(r["G"])((function(){return[Object(r["j"])(m,{text:"",onClick:t[3]||(t[3]=function(e){return o.editing=!0}),class:"mr-3"},{default:Object(r["G"])((function(){return[Object(r["j"])(b,{class:"mr-3"},{default:Object(r["G"])((function(){return[ve]})),_:1}),pe]})),_:1}),Object(r["j"])(f),Object(r["j"])(m,{onClick:t[4]||(t[4]=function(e){return o.start()}),color:"primary"},{default:Object(r["G"])((function(){return[Oe]})),_:1})]}))}:void 0]),1024))]})),_:1})],64)}var ye={ref:"canvas"};function _e(e,t,n,o,l,i){return Object(r["p"])(),Object(r["f"])("canvas",ye,null,512)}n("eea7"),n("46d4"),n("c770"),n("581e"),n("dddc");var he=n("68d6"),xe=n("57d2"),we=n("19a6"),ke=(n("5e5b"),n("b2f1")),Ve=n.n(ke),ze=n("9a81"),Se=(n("46c3"),n("4c57")),Te=32,Ge=37,Ae=38,Ce=16,Ue=40,Re=39,Ie=65,Me=90,Pe=83,Je=88,Ee=67,Le=82,Be=new Set,De=new Map,qe=new Map;function Ne(e){return Be.has(e)}function We(e,t){var n=De.get(e);return n||De.set(e,n=Object(Se["a"])()),Object(Se["d"])(n,t),function(){return Object(Se["c"])(n,t)}}function Fe(e,t){var n=qe.get(e);return n||qe.set(e,n=Object(Se["a"])()),Object(Se["d"])(n,t),function(){return Object(Se["c"])(n,t)}}window.addEventListener("keydown",(function(e){if(!Be.has(e.keyCode)){Be.add(e.keyCode);var t=De.get(e.keyCode);t&&Object(Se["b"])(t)}})),window.addEventListener("keyup",(function(e){Be.delete(e.keyCode);var t=qe.get(e.keyCode);t&&Object(Se["b"])(t)}));var Ze=new x(0,1);function Ke(e){return e.kind.rotations[e.rotation].map((function(t){return x.add(e.position,t)}))}function $e(e){for(var t=[],n=0;n<e.field_size.x;++n)t[n]=null;return t}function He(e){for(var t=[],n=0;n<e.field_size.y;++n)t[n]=$e(e);return t}function Qe(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t&&(t=Ve()(Math.random()).uint32()),{seed:t,field:He(e),falling:null,fall_queue:[],holding:null,hold_available:!0,garbage_ready:[],garbage_pending:[],dead:!1}}function Xe(e){var t=e.falling;return Object(r["t"])({seed:e.seed,field:e.field.map((function(e){return Object(r["z"])(e)})),falling:Object(r["k"])((function(e,n){return{get:function(){return e(),t},set:function(e){t=e&&Object(r["z"])(e),n()}}})),fall_queue:Object(r["z"])([]),holding:Object(r["A"])(null),hold_available:e.hold_available,garbage_ready:Object(r["z"])(e.garbage_ready),garbage_pending:Object(r["z"])(e.garbage_pending),dead:e.dead})}function Ye(e,t){var n,r=0,o=!1;function l(n){var r,o=Object(xe["a"])(Ke(n));try{for(o.s();!(r=o.n()).done;){var l=r.value;if(l.x<0||l.x>=e.field_size.x||l.y>=e.field_size.y)return!0;if(!(l.y<0)){var i=t.field[l.y][l.x];if(null!=i)return!0}}}catch(a){o.e(a)}finally{o.f()}return!1}function i(e){var t=e.position;while(1){var n=x.add(t,Ze);if(l(Object(g["a"])(Object(g["a"])({},e),{},{position:n})))break;t=n}return t}function a(){var e,n;if(!t.dead&&null!=t.falling){var r=t.holding;t.holding=null!==(e=null===(n=t.falling)||void 0===n?void 0:n.kind)&&void 0!==e?e:null,r&&t.fall_queue.unshift(r),t.falling=null,t.hold_available=!1,o=!0}}function u(e){if(t.dead||null==t.falling)return 0;for(var n=0;n<e;++n){var r=x.add(t.falling.position,Ze);if(l(Object(g["a"])(Object(g["a"])({},t.falling),{},{position:r})))return n;t.falling.position=r}return e}function c(e){if(t.dead||null==t.falling)return!1;var n=x.add(t.falling.position,new x(e,0));return!l(Object(g["a"])(Object(g["a"])({},t.falling),{},{position:n}))&&(t.falling.position=n,!0)}function f(n){if(t.dead||null==t.falling)return!1;var r=(t.falling.rotation+n)%4;r<0&&(r+=4);var o,i=e.wall_kicks.get(t.falling.kind);Object(ze["a"])(null!=i,"no kick info for piece"),o=1==n?i[2*t.falling.rotation]:i[2*r+1];var a,u=Object(xe["a"])(o);try{for(u.s();!(a=u.n()).done;){var c=a.value,f=x.add(t.falling.position,c);if(!l(Object(g["a"])(Object(g["a"])({},t.falling),{},{position:f,rotation:r})))return t.falling.position=f,t.falling.rotation=r,!0}}catch(d){u.e(d)}finally{u.f()}return!1}function d(){if(!t.dead&&null!=t.falling){var r,o=Object(xe["a"])(Ke(t.falling));try{for(o.s();!(r=o.n()).done;){var l=r.value;t.field[l.y][l.x]={id:t.falling.id,kind:t.falling.kind}}}catch(p){o.e(p)}finally{o.f()}for(var i=[],a=0;a<e.field_size.y;++a)t.field[a].every((function(e){return null!=e}))&&i.push(a);i.length>0&&n.clear_lines(i);var u,c=Object(xe["a"])(t.garbage_ready);try{for(c.s();!(u=c.n()).done;){var f=u.value,d=Ve()(t.seed);t.seed=d.uint32();for(var s=Math.floor(d()*e.field_size.x),b=0;b<e.field_size.y-f;++b)Object.assign(t.field[b],t.field[b+f]);for(var m=e.field_size.y-f;m<e.field_size.y;++m)for(var v=0;v<e.field_size.x;++v)t.field[m][v]=v==s?null:{id:-1,kind:j.GARBAGE}}}catch(p){c.e(p)}finally{c.f()}t.garbage_ready.length=0}}function s(n){var r,o=Object(xe["a"])(n);try{for(o.s();!(r=o.n()).done;){for(var l=r.value,i=l;i>0;--i)Object.assign(t.field[i],t.field[i-1]);for(var a=0;a<e.field_size.x;++a)t.field[0][a]=null}}catch(u){o.e(u)}finally{o.f()}}function b(){if(t.dead)return!1;if(t.fall_queue.length-1<e.bag_preview){var n=Ve()(t.seed);t.seed=n.uint32();var i=j.all.slice();while(i.length>0){var a=Math.floor(n()*i.length),u=i.splice(a,1)[0];t.fall_queue.push(u)}}var c=t.fall_queue[0],f=new x(5-Math.ceil(c.size/2),e.field_size.y/2-3),d=0,s={id:r++,kind:c,position:f,rotation:d};return t.hold_available=!o,o=!1,!l(s)&&(t.fall_queue.shift(),t.falling=s,!0)}function m(){t.dead=!0,t.falling=null}function v(){var e=t.garbage_pending.shift();t.garbage_ready.push(e)}return n={rules:e,state:t,collide:l,hard_drop_position:i,hold:a,drop:u,shift:c,rotate:f,lock_down:d,clear_lines:s,new_falling:b,end_game:m,apply_garbage:v}}function et(e,t){var n=0,r=0,o=0,l=!1,i=!1,a=!1,u=0,c=0;function f(){var e;t.state.dead||(t.new_falling()?(n=null!==(e=t.rules.move_reset_limit)&&void 0!==e?e:1/0,r=0,o=0,t.drop(1)):t.end_game())}function d(e){var n=x.add(e.position,Ze);return t.collide(Object(g["a"])(Object(g["a"])({},e),{},{position:n}))}function s(){t.lock_down(),f()}function b(){t.state.dead||null==t.state.falling||r>0&&n>0&&(n-=1,r=0)}function m(){t.state.hold_available&&(t.hold(),f())}function j(n){t.state.dead||null==t.state.falling||t.shift(n)&&(b(),e.autoshift&&(c=l?e.autoshift.delay-1:e.autoshift.initial_delay-1,l=!0))}function v(e){t.state.dead||null==t.state.falling||t.rotate(e)&&b()}function p(){t.state.dead||null==t.state.falling||(t.drop(20),s())}function O(e){t.state.dead||null==t.state.falling||(l=!1,1==e?a=!0:i=!0,u=e,j(e))}function y(n){t.state.dead||null==t.state.falling||(1==n?a=!1:i=!1,e.autoshift&&u==n&&(c=l?e.autoshift.delay:e.autoshift.initial_delay),u=i?-1:a?1:0)}f();var _=[We(Me,(function(){return v(-1)})),We(Ie,(function(){return v(-1)})),We(Je,(function(){return v(1)})),We(Pe,(function(){return v(1)})),We(Ae,(function(){return v(1)})),Fe(Ge,(function(){return y(-1)})),We(Ge,(function(){return O(-1)})),Fe(Re,(function(){return y(1)})),We(Re,(function(){return O(1)})),We(Te,(function(){return p()})),We(Ee,(function(){return m()})),We(Ce,(function(){return m()}))],h=0,w=setInterval(k,1e3/60);function k(){if(!t.state.dead){if(c>0?c-=1:e.autoshift&&0!=u&&j(u),null!=t.state.falling)if(d(t.state.falling))r+=1/t.rules.lock_delay,o=Math.min(o,Math.ceil(1/t.rules.fall_delay)),r>=1&&(o=0,r=0,s());else if(Ne(Ue)?o+=1/t.rules.fall_delay*e.soft_drop:o+=1/t.rules.fall_delay,o>1){var l,i=Math.floor(o),a=t.drop(i);a>0&&(n=null!==(l=t.rules.move_reset_limit)&&void 0!==l?l:1/0),a==i?o-=i:o=0}t.state.garbage_pending.length>0&&(h+=1,60==h&&(t.apply_garbage(),h=0))}}return function(){clearInterval(w);var e,t=Object(xe["a"])(_);try{for(t.s();!(e=t.n()).done;){var n=e.value;n()}}catch(r){t.e(r)}finally{t.f()}_.length=0}}n("e28c"),n("f1c6"),n("7bea"),n("90fa"),n("feeb"),n("1c98"),n("06a3"),n("1ca0"),n("3a0c"),n("9426"),n("100a"),n("3051"),n("9598"),n("2731"),n("587f"),n("c60d"),n("b285"),n("6a35"),n("b391"),n("1234"),n("dfa9"),n("7c3f"),n("2d6b"),n("0312"),n("1f3b"),n("c666"),n("705d"),n("c1c3");var tt,nt=n("7a28");function rt(e){function t(e,t,n,r){function o(t,n){var r=x.add(n,new x(-2,-2)),o=x.add(n,new x(2,3*t-1));e.lineCap="butt",e.lineJoin="miter",e.strokeStyle="gray",e.beginPath();var i=2*l,a=8*l;e.lineWidth=i,e.moveTo(r.x+i/2,r.y+a),e.lineTo(r.x+i/2,r.y+i/2),e.lineTo(r.x+a,r.y+i/2),e.moveTo(o.x-a,r.y+i/2),e.lineTo(o.x-i/2,r.y+i/2),e.lineTo(o.x-i/2,r.y+a),e.moveTo(o.x-i/2,o.y-a),e.lineTo(o.x-i/2,o.y-i/2),e.lineTo(o.x-a,o.y-i/2),e.moveTo(r.x+a,o.y-i/2),e.lineTo(r.x+i/2,o.y-i/2),e.lineTo(r.x+i/2,o.y-a),e.stroke()}var l=1/r;e.save(),e.scale(r,r),e.translate(n.x,n.y),o(1,new x(-3,3)),o(t.bag_preview,new x(t.field_size.x+3,3)),e.fillStyle="white",e.fillRect(0,0,t.field_size.x,t.field_size.y/2),e.lineWidth=1*l,e.strokeStyle="#f4f4f4";for(var i=0;i<t.field_size.x-1;++i)e.beginPath(),e.moveTo(i+1-.5*l,0),e.lineTo(i+1-.5*l,t.field_size.y/2),e.stroke();for(var a=0;a<t.field_size.y/2-1;++a)e.beginPath(),e.moveTo(0,a+1-.5*l),e.lineTo(t.field_size.x,a+1-.5*l),e.stroke();e.translate(0,-t.field_size.y/2),e.restore()}if("v1"==e.style)return{tile_size:e.size,smoothing:e.smooth,render_tile:function(t,n,r,o){var l=new Map([[j.I,"#31c7ef"],[j.O,"#e39f02"],[j.T,"#af298a"],[j.J,"#2141c6"],[j.L,"#e35b02"],[j.S,"#59b101"],[j.Z,"#d70f37"],[j.GARBAGE,"gray"]]);if(t.save(),o==tt.ghost)t.fillStyle="white",t.fillRect(0,0,1,1);else if(o==tt.disabled)t.filter="grayscale(100%)";else{var i=l.get(n);Object(ze["a"])(null!=i,"no color for piece"),t.fillStyle=i,t.fillRect(0,0,1,1)}var a=e.border/e.size;t.beginPath(),t.lineCap="butt",t.lineWidth=a,t.strokeStyle="#00000040",r[0]&&(t.moveTo(0,a/2),t.lineTo(a/2,a/2),t.lineTo(a/2,0)),r[1]&&(t.moveTo(0,a/2),t.lineTo(1,a/2)),r[2]&&(t.moveTo(1-a/2,0),t.lineTo(1-a/2,a/2),t.lineTo(1,a/2)),r[3]&&(t.moveTo(-a/2+1,0),t.lineTo(-a/2+1,1)),r[4]&&(t.moveTo(1,1-a/2),t.lineTo(1-a/2,1-a/2),t.lineTo(1-a/2,1)),r[5]&&(t.moveTo(1,-a/2+1),t.lineTo(0,-a/2+1)),r[6]&&(t.moveTo(a/2,1),t.lineTo(a/2,1-a/2),t.lineTo(0,1-a/2)),r[7]&&(t.moveTo(a/2,1),t.lineTo(a/2,0)),t.strokeStyle="#00000040",t.stroke(),t.filter="none",t.restore()},render_background:function(n,r,o){return t(n,r,o,e.size)}};if("v2"==e.style)return{tile_size:e.size,smoothing:e.smooth,render_tile:function(t,n,r,o){var l=e.border/e.size,i=new Map([[j.I,["#31c7ef","#48e0ff","#20b0e0"]],[j.O,["#f7d308","#ffec1c","#e8c000"]],[j.T,["#ad4d9c","#c658b4","#983888"]],[j.J,["#5a65ad","#6680cc","#4857a0"]],[j.L,["#ef7921","#ff9030","#e06810"]],[j.S,["#42b642","#48d048","#30a030"]],[j.Z,["#ef2029","#ff4848","#d01818"]],[j.GARBAGE,["#42b642","#48d048","#30a030"]]]),a=i.get(n);Object(ze["a"])(null!=a,"no color for piece"),t.save(),o==tt.ghost&&(t.fillStyle="white",t.fillRect(0,0,1,1),t.globalAlpha=e.ghost_opacity),o!=tt.disabled&&n!=j.GARBAGE||(t.filter="grayscale(100%)");var u=l,c=l/2,f=1-l,d=1-l/2;t.fillStyle=a[0],t.fillRect(u,u,1-2*l,1-2*l),t.lineCap="butt",t.lineWidth=l,t.beginPath(),t.moveTo(c,f),t.lineTo(c,u),t.strokeStyle=r[7]?a[1]:a[0],t.stroke(),t.beginPath(),t.moveTo(u,c),t.lineTo(f,c),t.strokeStyle=r[1]?a[1]:a[0],t.stroke(),t.beginPath(),t.moveTo(0,c),t.lineTo(c,c),t.lineTo(c,0),t.strokeStyle=r[0]||r[7]||r[1]?a[1]:a[0],t.stroke(),t.beginPath(),t.moveTo(d,u),t.lineTo(d,f),t.strokeStyle=r[3]?a[2]:a[0],t.stroke(),t.beginPath(),t.moveTo(f,d),t.lineTo(u,d),t.strokeStyle=r[5]?a[2]:a[0],t.stroke(),t.beginPath(),t.moveTo(1,d),t.lineTo(d,d),t.lineTo(d,1),t.strokeStyle=r[4]||r[3]||r[5]?a[2]:a[0],t.stroke(),t.beginPath(),t.moveTo(d,0),t.lineTo(d,c),t.lineTo(1,c),t.strokeStyle=r[2]&&r[1]&&r[3]?a[0]:r[1]?a[1]:r[3]||r[2]?a[2]:a[0],t.stroke(),t.beginPath(),t.moveTo(c,1),t.lineTo(c,d),t.lineTo(0,d),t.strokeStyle=r[6]&&r[7]&&r[5]?a[0]:r[7]?a[1]:r[5]?a[2]:r[6]?a[1]:a[0],t.stroke(),t.filter="none",t.restore()},render_background:function(n,r,o){return t(n,r,o,e.size)}};if("tetrio"==e.style){var r=new Image;r.src=n("2c01");var o=new Image;o.src=n("4232");var l=[j.Z,j.L,j.O,j.S,j.I,j.J,j.T];return{tile_size:30,smoothing:!1,render_tile:function(t,n,o,i){var a;t.save(),a=i==tt.disabled||n==j.GARBAGE?9:l.indexOf(n),i==tt.ghost?(t.globalAlpha=.2,t.drawImage(r,217,0,30,30,0,0,1,1),e.ghost_color&&(t.globalAlpha=1,t.globalCompositeOperation="source-atop",t.drawImage(r,31*a,0,30,30,0,0,1,1))):t.drawImage(r,31*a,0,30,30,0,0,1,1),t.restore()},render_background:function(e,t,n){function r(t,n){e.fillStyle="#000000e0",e.fillRect(n.x-2,n.y-2,4,1+3*t);var r=.125;e.strokeStyle="#ffffffe0",e.lineJoin="round",e.lineWidth=r,e.strokeRect(n.x-2-r/2,n.y-2-r/2,4+r,1+3*t+r)}var l=1/30;e.save(),e.drawImage(o,0,0,2e3,1333,30*(n.x+t.field_size.x/2)-1e3,0,2e3,1333),e.fillStyle="#000000a0",e.fillRect(0,0,2e3,1333),e.scale(30,30),e.translate(n.x,n.y);var i=.125;e.strokeStyle="#ffffffe0",e.lineCap="butt",e.lineJoin="round",e.lineWidth=i,e.beginPath(),e.moveTo(0,i/2),e.lineTo(-i/2,i/2),e.lineTo(-i/2,t.field_size.y/2+i/2),e.lineTo(t.field_size.x+i/2,t.field_size.y/2+i/2),e.lineTo(t.field_size.x+i/2,i/2),e.lineTo(t.field_size.x,i/2),e.stroke(),r(1,new x(-3,3)),r(t.bag_preview,new x(t.field_size.x+3,3)),e.fillStyle="#000000e0",e.fillRect(0,0,t.field_size.x,t.field_size.y/2),e.lineWidth=1*l,e.strokeStyle="#ffffff14";for(var a=0;a<t.field_size.x-1;++a)e.beginPath(),e.moveTo(a+1-.5*l,0),e.lineTo(a+1-.5*l,t.field_size.y/2),e.stroke();for(var u=0;u<t.field_size.y/2-1;++u)e.beginPath(),e.moveTo(0,u+1-.5*l),e.lineTo(t.field_size.x,u+1-.5*l),e.stroke();e.translate(0,-t.field_size.y/2),e.restore()}}}throw new Error("invalid render config")}function ot(e){return lt.apply(this,arguments)}function lt(){return lt=Object(nt["a"])(regeneratorRuntime.mark((function e(t){var n,r,o,l,i,a,u,c,f,d,s,b,m,v,p,O,g,_,h,w,k,V,z,S,T,G,A;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=rt(t),r=[tt.normal,tt.ghost,tt.disabled],o=document.createElement("canvas"),n.smoothing?(i=256,o.width=n.tile_size*i,o.height=n.tile_size*r.length*(256/i),l=function(e,t){var n=e|t<<8;return new x(n%i,Math.floor(n/i))}):(o.width=n.tile_size*r.length,o.height=n.tile_size,l=function(e,t){return new x(t,0)}),a=function(e,t){for(var r=0,o=0;o<8;++o)e[o]&&(r|=1<<o);return x.scale(l(r,t),n.tile_size)},u=(new TextEncoder).encode(JSON.stringify(t)+n.render_tile.toString()),e.next=8,window.crypto.subtle.digest("SHA-256",u);case 8:if(c=e.sent,f=Array.from(new Uint8Array(c)).map((function(e){return e.toString(16).padStart(2,"0")})).join(""),d=localStorage.getItem("mfro:tetris-tilesheet"),!d){e.next=18;break}if(s=JSON.parse(d),s.hash!=f){e.next=17;break}return e.abrupt("return",[a,s.images]);case 17:console.log("tilesheet cache miss ".concat(s.hash," expected ").concat(f));case 18:b=o.getContext("2d"),Object(ze["a"])(null!=b,"no context"),b.scale(n.tile_size,n.tile_size),m=[],v=[].concat(Object(y["a"])(j.all),[j.GARBAGE]),p=Object(xe["a"])(v);try{for(p.s();!(O=p.n()).done;){g=O.value,b.clearRect(0,0,o.width,o.height),_=Object(xe["a"])(r);try{for(_.s();!(h=_.n()).done;)if(w=h.value,n.smoothing)for(k=0;k<256;++k){for(V=[],z=0;z<8;++z)V[z]=0!=(k&1<<z);S=l(k,w),b.translate(S.x,S.y),n.render_tile(b,g,V,w),b.translate(-S.x,-S.y)}else T=[!0,!0,!0,!0,!0,!0,!0,!0],G=l(0,w),b.translate(G.x,G.y),n.render_tile(b,g,T,w),b.translate(-G.x,-G.y)}catch(C){_.e(C)}finally{_.f()}A=o.toDataURL(),m.push(A)}}catch(C){p.e(C)}finally{p.f()}return m.length==v.length&&localStorage.setItem("mfro:tetris-tilesheet",JSON.stringify({hash:f,images:m})),e.abrupt("return",[a,m]);case 27:case"end":return e.stop()}}),e)}))),lt.apply(this,arguments)}(function(e){e[e["normal"]=0]="normal",e[e["ghost"]=1]="ghost",e[e["disabled"]=2]="disabled"})(tt||(tt={}));var it=new x(3,3),at=[new x(-1,-1),new x(0,-1),new x(1,-1),new x(1,0),new x(1,1),new x(0,1),new x(-1,1),new x(-1,0)];function ut(e,t){var n=document.createElement("canvas"),r=n.getContext("2d");return Object(ze["a"])(null!=r,"context"),n.width=e.tile_size*(t.field_size.x+12+2*it.x),n.height=e.tile_size*(t.field_size.y/2+2*it.y),e.render_background(r,t,x.add(it,new x(6,0))),n.toDataURL()}function ct(e,t,n){var o,l=rt(t),i=l.tile_size,a=new Map;function u(e){return e.x<0||e.x>=n.rules.field_size.x||e.y<0||e.y>=n.rules.field_size.y?null:n.state.field[e.y][e.x]}function c(e,t,n,r){var l=a.get(t),u=o(n,r,i),c=new we["e"];return c.scale=new we["c"](1/i,1/i),c.texture=new we["f"](l,new we["d"](u.x,u.y,i,i)),c.position=new we["c"](e.x,e.y),c}e.width=(n.rules.field_size.x+12+2*it.x)*i,e.height=(n.rules.field_size.y/2+2*it.y)*i,e.style.width="".concat(e.width,"px"),e.style.height="".concat(e.height,"px"),e.style.marginBottom="".concat(-it.y*i,"px");var f=function(){function e(t){Object(_["a"])(this,e),this.container=t,this.sprites=[]}return Object(h["a"])(e,[{key:"clear",value:function(){var e,t=Object(xe["a"])(this.sprites);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.container.removeChild(n)}}catch(r){t.e(r)}finally{t.f()}this.sprites=[]}},{key:"draw_tile",value:function(e,t,n,r){var o=c(e,t,n,r);this.sprites.push(o),this.container.addChild(o)}},{key:"draw_tetronimo",value:function(e,t){var n,r=this,o=e.kind.rotations[e.rotation],l=Object(xe["a"])(e.kind.rotations[e.rotation]);try{var i=function(){var l=n.value,i=x.add(e.position,l),a=at.map((function(e){return o.every((function(t){return!x.eq(t,x.add(l,e))}))}));r.draw_tile(i,e.kind,a,t)};for(l.s();!(n=l.n()).done;)i()}catch(a){l.e(a)}finally{l.f()}}}]),e}();function d(e,t){var o=new we["b"],l=new f(o);return Object(r["E"])((function(){return[e(),n.state.hold_available]}),(function(e){var n=Object(he["a"])(e,2),r=n[0],o=n[1];l.clear();var i,a=new x(2,2),u=Object(xe["a"])(r);try{for(u.s();!(i=u.n()).done;){var c=i.value;if(c){var f=Ke({id:-1,kind:c,position:x.zero,rotation:0}),d=f.reduce((function(e,t){return Math.min(e,t.x)}),1/0)+.5,s=f.reduce((function(e,t){return Math.min(e,t.y)}),1/0)+.5,b=f.reduce((function(e,t){return Math.max(e,t.x)}),-1/0)+.5,m=f.reduce((function(e,t){return Math.max(e,t.y)}),-1/0)+.5,j=new x(-(d+b)/2,-(s+m)/2),v=x.add(a,j),p=t&&!o?tt.disabled:tt.normal;l.draw_tetronimo({id:-1,kind:c,position:v,rotation:0},p),a=x.add(a,new x(0,3))}}}catch(O){u.e(O)}finally{u.f()}}),{immediate:!0}),o}var s=new we["a"]({view:e,width:i*(n.rules.field_size.x+12+2*it.x),height:i*(n.rules.field_size.y/2+2*it.y),transparent:!0});return ot(t).then((function(e){var t=Object(he["a"])(e,2),r=t[0],i=t[1];o=r,i.forEach((function(e,t){s.loader.add(t.toString(),e)})),s.loader.add("background",ut(l,n.rules)),s.loader.load()})),s.loader.onLoad.once((function(){for(var e=0;e<7;++e){var t=s.loader.resources[e].texture.baseTexture;a.set(j.all[e],t)}var o=s.loader.resources[j.all.length].texture.baseTexture;a.set(j.GARBAGE,o);var l=new we["b"];l.scale=new we["c"](i,i);var b=new we["b"];b.position=new we["c"](6+it.x,-n.rules.field_size.y/2+it.y);var m=new we["e"](s.loader.resources["background"].texture);m.width=n.rules.field_size.x+12+2*it.x,m.height=n.rules.field_size.y/2+2*it.y;var v=d((function(){return[n.state.holding]}),!0);v.position=new we["c"](1+it.x,1+it.y);var p=d((function(){return n.state.fall_queue.slice(0,5)}),!1);p.position=new we["c"](7+it.x+n.rules.field_size.x,1+it.y);var O=new we["b"];O.position=new we["c"](4+it.x,it.y),l.addChild(m),l.addChild(b),l.addChild(p),l.addChild(v),l.addChild(O),s.stage.addChild(l);for(var y=function(e){for(var t=function(t){var o=new x(e,t),l=null;Object(r["F"])((function(){null!=l&&(b.removeChild(l),l=null);var r=n.state.field[t][e];if(null!=r){var i=at.map((function(e){var t;return(null===(t=u(x.add(o,e)))||void 0===t?void 0:t.id)!=r.id}));l=c(new x(e,t),r.kind,i,tt.normal),b.addChild(l)}}))},o=0;o<n.rules.field_size.y;++o)t(o)},_=0;_<n.rules.field_size.x;++_)y(_);var h=new f(b);Object(r["F"])((function(){if(h.clear(),n.state.falling){var e=n.hard_drop_position(n.state.falling),t=Object(g["a"])(Object(g["a"])({},n.state.falling),{},{position:e});h.draw_tetronimo(t,tt.ghost),h.draw_tetronimo(n.state.falling,tt.normal)}}));var w=new f(O);Object(r["F"])((function(){w.clear();var e,t=n.rules.field_size.y/2,r=Object(xe["a"])(n.state.garbage_ready);try{for(r.s();!(e=r.n()).done;){var o=e.value;t-=o;for(var l=0;l<o;++l){var i=new x(0,t+l);w.draw_tile(i,j.GARBAGE,[!0,0==l,!0,!0,!0,l+1==o,!0,!0],tt.normal)}}}catch(s){r.e(s)}finally{r.f()}var a,u=Object(xe["a"])(n.state.garbage_pending);try{for(u.s();!(a=u.n()).done;){var c=a.value;t-=c;for(var f=0;f<c;++f){var d=new x(0,t+f);w.draw_tile(d,j.GARBAGE,[!0,0==f,!0,!0,!0,f+1==c,!0,!0],tt.ghost)}}}catch(s){u.e(s)}finally{u.f()}}))})),function(){return s.destroy()}}var ft={name:"game",props:{value:Object},setup:function(e){var t,n,o,l,i=Object(r["C"])(e,"value"),a=Object(r["u"])(null),u=Object(r["l"])("user_prefs");function c(){var e;a.value==n&&i.value==o&&u.value.render==l||(null===(e=t)||void 0===e||e(),t=a.value&&i.value&&ct(a.value,u.value.render,i.value),n=a.value,o=i.value,l=u.value.render)}return Object(r["E"])(i,c),Object(r["E"])(a,c),Object(r["E"])(u,c),Object(r["o"])(c),Object(r["n"])((function(){var e;null===(e=t)||void 0===e||e()})),{canvas:a}}};ft.render=_e;var dt=ft,st=Object(r["i"])("content_paste"),bt=Object(r["i"])("check");function mt(e,t,n,o,l,i){var a=Object(r["x"])("v-icon"),u=Object(r["x"])("v-button"),c=Object(r["x"])("v-text-field"),f=Object(r["x"])("v-flex");return Object(r["p"])(),Object(r["f"])(f,{"align-center":"","justify-center":""},{default:Object(r["G"])((function(){return[Object(r["j"])(u,{small:"",icon:"",onClick:t[1]||(t[1]=function(e){return o.copy()}),onMouseleave:t[2]||(t[2]=function(e){return o.copied=!1})},{default:Object(r["G"])((function(){return[o.copied?(Object(r["p"])(),Object(r["f"])(a,{key:1,small:"",bold:"",style:{color:"#4caf50"}},{default:Object(r["G"])((function(){return[bt]})),_:1})):(Object(r["p"])(),Object(r["f"])(a,{key:0,small:""},{default:Object(r["G"])((function(){return[st]})),_:1}))]})),_:1}),Object(r["j"])(c,{small:"",class:"mt-0 ml-4",ref:"input",solo:"","model-value":n.value},null,8,["model-value"])]})),_:1})}var jt={name:"clipboard",props:{value:String},setup:function(e){var t=Object(r["A"])(null),n=Object(r["A"])(!1);return{input:t,copied:n,copy:function(){t.value.select(),document.execCommand("copy"),n.value=!0}}}};jt.render=mt;var vt=jt,pt={name:"room",components:{game:dt,clipboard:vt,editConfig:be},props:["room"],setup:function(e){var t=window.location,n=Object(r["d"])((function(){return"".concat(t.origin).concat(t.pathname,"?code=").concat(e.room.code)})),o=Object(r["A"])(!1),l=Object(r["z"])({field_size:new x(10,40),fall_delay:50,lock_delay:30,move_reset_limit:15,wall_kicks:v.standard,bag_preview:5}),i=Object(r["d"])((function(){return e.room.members.filter((function(t,n){return n!=e.room.index}))}));return{link:n,editing:o,game_rules:l,others:i,start:function(){e.room.start_game(l)}}}};pt.render=ge;var Ot=pt,gt=Object(r["j"])("span",null,"Create lobby",-1),yt=Object(r["i"])("arrow_forward");function _t(e,t,n,o,l,i){var a=Object(r["x"])("edit-config"),u=Object(r["x"])("v-dialog"),c=Object(r["x"])("game"),f=Object(r["x"])("v-grow"),d=Object(r["x"])("v-text-field"),s=Object(r["x"])("v-icon"),b=Object(r["x"])("v-button"),m=Object(r["x"])("v-flex"),j=Object(r["x"])("v-card");return Object(r["p"])(),Object(r["f"])(r["a"],null,[Object(r["j"])(u,{"model-value":o.editing},{default:Object(r["G"])((function(){return[Object(r["j"])(a,{kind:"game",modelValue:o.game_rules,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.game_rules=e}),onClose:t[2]||(t[2]=function(e){return o.editing=!1})},null,8,["modelValue"])]})),_:1},8,["model-value"]),Object(r["j"])(m,{column:"",grow:"","align-center":""},{default:Object(r["G"])((function(){return[Object(r["j"])(c,{value:o.local_game},null,8,["value"]),Object(r["j"])(f),Object(r["j"])(j,{class:"mt-4"},{default:Object(r["G"])((function(){return[Object(r["j"])(d,{label:"Name",modelValue:o.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.name=e})},null,8,["modelValue"]),Object(r["j"])(m,{"justify-center":"",class:"my-2"},{default:Object(r["G"])((function(){return[Object(r["j"])(b,{text:"",color:"primary",disabled:!o.valid,onClick:t[4]||(t[4]=function(e){return o.create_room()})},{default:Object(r["G"])((function(){return[gt,Object(r["j"])(s,{class:"ml-3"},{default:Object(r["G"])((function(){return[yt]})),_:1})]})),_:1},8,["disabled"])]})),_:1})]})),_:1})]})),_:1})],64)}n("32ec"),n("5f99");var ht=n("d313"),xt=n("b740");function wt(e,t,n){var r=e[t];e[t]=function(){var e=r.apply(void 0,arguments);return n.apply(void 0,arguments),e}}function kt(e,t,n){var o,l="box:8080"==window.location.host||"localhost:8080"==window.location.host?"ws://box:8081/":"wss://api.mfro.me/tetris/play",i=Object(r["z"])({local:null,index:0,members:[],code:n,state:0,start_game:function(e){var t=Ve()(Math.random()).uint32();Object(ht["c"])(o,xt["f"],{seed:t,rules:p.save(e)})}});function a(){var e=i.members.filter((function(e,t){return e.game&&!e.game.state.dead}));if(1==e.length&&(e[0].winner=!0),0==e.length||1==e.length&&i.members.length>1){i.local=null;var t,n=Object(xe["a"])(i.members);try{for(n.s();!(t=n.n()).done;){var r=t.value;r.game=null}}catch(o){n.e(o)}finally{n.f()}}}o=i.code?new WebSocket("".concat(l,"?name=").concat(e,"&code=").concat(i.code)):new WebSocket("".concat(l,"?name=").concat(e));var u=null;return Object(Se["d"])(Object(ht["b"])(o,xt["e"]),(function(e){var n;null===(n=u)||void 0===n||n();var r=p.load(e.rules),l=Xe(Qe(r,e.seed));i.local=Ye(r,l),wt(i.local,"hold",(function(){return Object(ht["c"])(o,xt["b"],{type:"hold"})})),wt(i.local,"drop",(function(e){return Object(ht["c"])(o,xt["b"],{type:"drop",distance:e})})),wt(i.local,"shift",(function(e){return Object(ht["c"])(o,xt["b"],{type:"shift",dir:e})})),wt(i.local,"rotate",(function(e){return Object(ht["c"])(o,xt["b"],{type:"rotate",dir:e})})),wt(i.local,"lock_down",(function(){return Object(ht["c"])(o,xt["b"],{type:"lock_down"})})),wt(i.local,"clear_lines",(function(e){return Object(ht["c"])(o,xt["b"],{type:"send_lines",count:Vt(e.length)})})),wt(i.local,"apply_garbage",(function(){return Object(ht["c"])(o,xt["b"],{type:"apply_garbage"})})),wt(i.local,"new_falling",(function(){return Object(ht["c"])(o,xt["b"],{type:"new_falling"})})),wt(i.local,"end_game",(function(){Object(ht["c"])(o,xt["b"],{type:"end_game"}),a()}));for(var c=0;c<e.players;++c)if(i.members[c].winner=!1,c==i.index)i.members[c].game=i.local;else{var f=Xe(Qe(r,e.seed));i.members[c].game=Ye(r,f)}u=et(t,i.local)})),Object(Se["d"])(Object(ht["b"])(o,xt["a"]),(function(e){var t=Object(he["a"])(e,2),n=t[0],r=t[1],o=i.members[n].game;if(o!=i.local||"send_lines"==r.type)switch(r.type){case"hold":o.hold();break;case"drop":o.drop(r.distance);break;case"shift":o.shift(r.dir);break;case"rotate":o.rotate(r.dir);break;case"lock_down":o.lock_down();break;case"apply_garbage":o.apply_garbage();break;case"new_falling":o.new_falling();break;case"end_game":o.end_game(),a();break;case"send_lines":var l=i.members[(n+1)%i.members.length].game;l.state.garbage_pending.push(r.count);break}})),Object(Se["d"])(Object(ht["b"])(o,xt["c"]),(function(e){if(e!=i.code){var t=new URL(window.location.href);t.searchParams.delete("code"),window.history.replaceState(null,document.title,t.pathname+t.search)}i.code=e})),Object(Se["d"])(Object(ht["b"])(o,xt["d"]),(function(e){var t,n=e.index,r=e.names;if(null===(t=u)||void 0===t||t(),i.members=r.map((function(e){return{name:e,game:null,winner:!1}})),i.index=n,i.members.length>1){var o=new URL(window.location.href);o.searchParams.set("code",i.code),window.history.replaceState(null,document.title,o.pathname+o.search)}a()})),i}function Vt(e){return 4==e?4:e-1}var zt={name:"landing",components:{game:dt,editConfig:be,configGameRules:Z,configUserPrefs:de},emits:["room"],setup:function(e,t){var n,o,l=t.emit,i=Object(r["A"])(null),a=Object(r["z"])({field_size:new x(10,40),fall_delay:50,lock_delay:30,move_reset_limit:15,wall_kicks:v.standard,bag_preview:5}),u=Object(r["l"])("user_prefs"),c=Object(r["A"])(null),f=function(){var e;null===(e=o)||void 0===e||e();var t=Xe(Qe(a));c.value=Ye(a,t),o=et(u.value,c.value)};Object(r["o"])((function(){f()})),Object(r["n"])((function(){var e;return null===(e=o)||void 0===e?void 0:e()})),We(Le,(function(){return f()}));var d=Object(r["A"])(null!==(n=localStorage.getItem("mfro:user-name"))&&void 0!==n?n:""),s=Object(r["d"])((function(){return""!=d.value}));return{local_game:c,editing:i,game_rules:a,name:d,valid:s,create_room:function(){localStorage.setItem("mfro:user-name",d.value);var e=kt(d.value,u.value);l("room",e)},edit:function(e){i.value=e}}}};zt.render=_t;var St=zt,Tt=Object(r["j"])("span",null,"Join lobby",-1),Gt=Object(r["i"])("arrow_forward");function At(e,t,n,o,l,i){var a=Object(r["x"])("v-text-field"),u=Object(r["x"])("v-icon"),c=Object(r["x"])("v-button"),f=Object(r["x"])("v-flex"),d=Object(r["x"])("v-card");return Object(r["p"])(),Object(r["f"])(f,{column:"",grow:"","align-center":"",class:"mt-6"},{default:Object(r["G"])((function(){return[Object(r["j"])(d,{class:"mb-4"},{default:Object(r["G"])((function(){return[Object(r["j"])(a,{label:"Code",modelValue:o.code,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.code=e})},null,8,["modelValue"]),Object(r["j"])(a,{label:"Name",modelValue:o.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.name=e})},null,8,["modelValue"]),Object(r["j"])(f,{"justify-center":"",class:"my-2"},{default:Object(r["G"])((function(){return[Object(r["j"])(c,{text:"",color:"primary",disabled:!o.valid,onClick:t[3]||(t[3]=function(e){return o.submit()})},{default:Object(r["G"])((function(){return[Tt,Object(r["j"])(u,{class:"ml-3"},{default:Object(r["G"])((function(){return[Gt]})),_:1})]})),_:1},8,["disabled"])]})),_:1})]})),_:1})]})),_:1})}var Ct={name:"joining",emits:["room"],props:{code:String},setup:function(e,t){var n,o=t.emit,l=Object(r["A"])(null!==(n=localStorage.getItem("mfro:user-name"))&&void 0!==n?n:""),i=Object(r["A"])(e.code),a=Object(r["d"])((function(){return""!=l.value})),u=Object(r["l"])("user_prefs");return{name:l,code:i,valid:a,submit:function(){localStorage.setItem("mfro:user-name",l.value);var e=kt(l.value,u.value,i.value);o("room",e)}}}};Ct.render=At;var Ut=Ct,Rt={name:"tetris",components:{editConfig:be,room:Ot,landing:St,joining:Ut},setup:function(){var e=Object(r["A"])(null),t=new URL(window.location.href),n=t.searchParams.get("code"),o=Object(r["A"])(n),l=localStorage.getItem("mfro:tetris-user-preferences"),i=Object(r["A"])(!1),a=Object(r["A"])(l?JSON.parse(l):{});return Reflect.has(a.value,"autoshift")||(a.value.autoshift={delay:2,initial_delay:10}),Reflect.has(a.value,"soft_drop")||(a.value.soft_drop=10),Reflect.has(a.value,"render")||(a.value.render={size:32,smooth:!1,style:"v2",border:3,ghost_opacity:.4}),Object(r["r"])("user_prefs",a),{current_room:e,joining_code:o,editing_user:i,user_prefs:Object(r["d"])({get:function(){return a.value},set:function(e){a.value=e,localStorage.setItem("mfro:tetris-user-preferences",JSON.stringify(e))}})}}};n("292c"),n("3315");Rt.render=u,Rt.__scopeId="data-v-09199f64";var It=Rt;Object(r["e"])(It).use(o["a"]).mount("#app")},e306:function(e,t,n){"use strict";var r=n("7129"),o=n.n(r);n.d(t,"default",(function(){return o.a}))},eadd:function(e,t,n){}});
//# sourceMappingURL=index.58a6089d.js.map