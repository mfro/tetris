(function(e){function n(n){for(var i,l,r=n[0],f=n[1],u=n[2],d=0,s=[];d<r.length;d++)l=r[d],Object.prototype.hasOwnProperty.call(a,l)&&a[l]&&s.push(a[l][0]),a[l]=0;for(i in f)Object.prototype.hasOwnProperty.call(f,i)&&(e[i]=f[i]);c&&c(n);while(s.length)s.shift()();return o.push.apply(o,u||[]),t()}function t(){for(var e,n=0;n<o.length;n++){for(var t=o[n],i=!0,r=1;r<t.length;r++){var f=t[r];0!==a[f]&&(i=!1)}i&&(o.splice(n--,1),e=l(l.s=t[0]))}return e}var i={},a={index:0},o=[];function l(n){if(i[n])return i[n].exports;var t=i[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,l),t.l=!0,t.exports}l.m=e,l.c=i,l.d=function(e,n,t){l.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,n){if(1&n&&(e=l(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)l.d(t,i,function(n){return e[n]}.bind(null,i));return t},l.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(n,"a",n),n},l.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},l.p="";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],f=r.push.bind(r);r.push=n,r=r.slice();for(var u=0;u<r.length;u++)n(r[u]);var c=f;o.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("cd49")},1219:function(e,n,t){"use strict";t("4c22")},"4c22":function(e,n,t){},cbef:function(e,n,t){},cd49:function(e,n,t){"use strict";t.r(n);t("e260"),t("e6cf"),t("cca6"),t("a79d");var i=t("7a23"),a=t("a0ea"),o=Object(i["s"])("data-v-77139684");Object(i["l"])("data-v-77139684");var l={ref:"canvas"};Object(i["k"])();var r=o((function(e,n,t,a,r,f){var u=Object(i["n"])("v-app");return Object(i["j"])(),Object(i["e"])(u,{"align-center":"",class:"pa-6"},{default:o((function(){return[Object(i["g"])("canvas",l,null,512)]})),_:1})})),f=(t("99af"),t("a623"),t("4de4"),t("c975"),t("d81d"),t("13d5"),t("fb6a"),t("a434"),t("4ec9"),t("d3b7"),t("3ca3"),t("ddb0"),t("3835")),u=t("5530"),c=t("b85c"),d=t("2909"),s=(t("6062"),32),v=37,y=38,p=16,h=40,g=39,_=65,b=90,x=83,w=88,m=67,k=new Set,O=new Map;function j(e){return k.has(e)}function T(e,n){var t=O.get(e);t||O.set(e,t=[]),t.push(n)}function z(e,n){if(!e)throw new Error(n)}function M(e,n){if(e.length!=n.length)throw new Error("invalid zip");return e.map((function(e,t){return[e,n[t]]}))}window.addEventListener("keydown",(function(e){if(!k.has(e.keyCode)){k.add(e.keyCode);var n=O.get(e.keyCode);if(n){var t,i=Object(c["a"])(n);try{for(i.s();!(t=i.n()).done;){var a=t.value;a()}}catch(o){i.e(o)}finally{i.f()}}}})),window.addEventListener("keyup",(function(e){k.delete(e.keyCode)}));var q=t("d4ec"),P=t("bee2"),S=function(){function e(n,t){Object(q["a"])(this,e),this.x=n,this.y=t}return Object(P["a"])(e,[{key:"len",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"dir",get:function(){return Math.atan2(this.y,this.x)}}],[{key:"norm",value:function(n){return e.polar(1,n.dir)}},{key:"scale",value:function(n,t){return new e(n.x*t,n.y*t)}},{key:"add",value:function(n,t){return new e(n.x+t.x,n.y+t.y)}},{key:"dot",value:function(e,n){return e.x*n.x+e.y*n.y}},{key:"eq",value:function(e,n){return e.x==n.x&&e.y==n.y}},{key:"delta",value:function(n,t){var i=e.dot(n,t),a=Math.acos(i/n.len/t.len);return n.y*t.x>n.x*t.y?-a:a}},{key:"polar",value:function(n,t){return new e(Math.cos(t)*n,Math.sin(t)*n)}}]),e}();function C(e,n,t){for(var i=t.map((function(e){return new S(e[0],e[1])})),a=[i],o=0;o<3;++o)i=i.map((function(n){return new S(e-1-n.y,n.x)})),a.push(i);return{size:e,color:n,rotations:a}}function E(e){return e.map((function(e){return[S.zero].concat(Object(d["a"])(e.map((function(e){return new S(e[0],-e[1])}))))}))}S.zero=new S(0,0);var A=E([[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]],[[0,0]]]),I=E([[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[1,0],[1,-1],[0,2],[1,2]],[[0,0],[-1,0],[-1,1],[0,-2],[-1,-2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]],[[0,0],[-1,0],[-1,-1],[0,2],[-1,2]],[[0,0],[1,0],[1,1],[0,-2],[1,-2]]]),J=E([[[0,0],[-2,0],[1,0],[-2,-1],[1,2]],[[0,0],[2,0],[-1,0],[2,1],[-1,-2]],[[0,0],[-1,0],[2,0],[-1,2],[2,-1]],[[0,0],[1,0],[-2,0],[1,-2],[-2,1]],[[0,0],[2,0],[-1,0],[2,1],[-1,-2]],[[0,0],[-2,0],[1,0],[-2,-1],[1,2]],[[0,0],[1,0],[-2,0],[1,-2],[-2,1]],[[0,0],[-1,0],[2,0],[-1,2],[2,-1]]]),R=E([[[0,0],[-2,0],[1,0],[1,2],[-2,-1]],[[0,0],[2,0],[-1,0],[2,1],[-1,-2]],[[0,0],[-1,0],[2,0],[-1,2],[2,-1]],[[0,0],[-2,0],[1,0],[-2,1],[1,-1]],[[0,0],[2,0],[-1,0],[2,1],[-1,-1]],[[0,0],[1,0],[-2,0],[1,2],[-2,-1]],[[0,0],[-2,0],[1,0],[-2,1],[1,-2]],[[0,0],[2,0],[-1,0],[-1,2],[2,-1]]]),W=[C(4,"#0f9bd7",[[0,1],[1,1],[2,1],[3,1]]),C(2,"#e39f02",[[0,0],[0,1],[1,0],[1,1]]),C(3,"#af298a",[[1,0],[0,1],[1,1],[2,1]]),C(3,"#2141c6",[[0,0],[0,1],[1,1],[2,1]]),C(3,"#e35b02",[[2,0],[0,1],[1,1],[2,1]]),C(3,"#59b101",[[1,0],[2,0],[0,1],[1,1]]),C(3,"#d70f37",[[0,0],[1,0],[1,1],[2,1]])],F=(new Map([[W[0],J],[W[1],I],[W[2],I],[W[3],I],[W[4],I],[W[5],I],[W[6],I]]),new Map([[W[0],R],[W[1],I],[W[2],I],[W[3],I],[W[4],I],[W[5],I],[W[6],I]]));new Map([[W[0],A],[W[1],A],[W[2],A],[W[3],A],[W[4],A],[W[5],A],[W[6],A]]);function L(e){return e.kind.rotations[e.rotation].map((function(n){return S.add(e.position,n)}))}function B(e){for(var n=[],t=0;t<e.field_size.x;++t)n[t]=null;return n}function D(e){for(var n=[],t=0;t<e.field_size.y;++t)n[t]=B(e);return n}function G(e){return{field:D(e),falling:null,fall_queue:[],fall_delay:0,move_reset:0,repeating:!1,repeat_shift:0,repeat_delay:0,holding:null,hold_available:!0}}function H(e,n,t){var i=new S(0,1),a=0;function o(){if(t.fall_queue.length<e.bag_preview){var n=W.slice();while(n.length>0){var i=Math.floor(Math.random()*n.length),o=n.splice(i,1)[0];t.fall_queue.push(o)}}var r=t.fall_queue.shift(),f=new S(5-Math.ceil(r.size/2),e.field_size.y/2-2),u=0;t.falling={id:a++,kind:r,position:f,rotation:u},t.hold_available=!0,t.fall_delay=0,l(t.falling)&&clearInterval(C)}function l(n){var i,a=Object(c["a"])(L(n));try{for(a.s();!(i=a.n()).done;){var o=i.value;if(o.x<0||o.x>=e.field_size.x||o.y>=e.field_size.y)return!0;if(!(o.y<0)){var l=t.field[o.y][o.x];if(null!=l)return!0}}}catch(r){a.e(r)}finally{a.f()}return!1}function r(e){var n=e.position;while(1){var t=S.add(n,i);if(l(Object(u["a"])(Object(u["a"])({},e),{},{position:t})))break;n=t}return n}function f(){if(null==t.falling)return!1;var e,n=Object(c["a"])(L(t.falling));try{for(n.s();!(e=n.n()).done;){var i=e.value;t.field[i.y][i.x]={id:t.falling.id,kind:t.falling.kind}}}catch(a){n.e(a)}finally{n.f()}o()}function d(e){var n=S.add(e.position,i);return l(Object(u["a"])(Object(u["a"])({},e),{},{position:n}))}function k(){null!=t.falling&&d(t.falling)&&t.move_reset>0&&(t.move_reset-=1,t.fall_delay=e.lock_delay)}function O(){var e,n,i=t.holding;t.holding=null!==(e=null===(n=t.falling)||void 0===n?void 0:n.kind)&&void 0!==e?e:null,i&&t.fall_queue.unshift(i),o(),t.hold_available=!1}function M(e){if(null!=t.falling){var i=S.add(t.falling.position,new S(e,0));l(Object(u["a"])(Object(u["a"])({},t.falling),{},{position:i}))||(t.falling.position=i,n.autoshift&&(t.repeat_delay=t.repeating?n.autoshift.delay:n.autoshift.initial_delay,t.repeating=!0),k())}}function q(n){if(null!=t.falling){var i=(t.falling.rotation+n)%4;i<0&&(i+=4);var a,o=e.wall_kicks.get(t.falling.kind);z(null!=o,"no kick info for piece ".concat(W.indexOf(t.falling.kind))),a=1==n?o[2*t.falling.rotation]:o[2*i+1];var r,f=Object(c["a"])(a);try{for(f.s();!(r=f.n()).done;){var d=r.value,s=S.add(t.falling.position,d);if(!l(Object(u["a"])(Object(u["a"])({},t.falling),{},{position:s,rotation:i})))return t.falling.position=s,t.falling.rotation=i,void k()}}catch(v){f.e(v)}finally{f.f()}}}function P(){if(null==t.falling)return!1;t.falling.position=r(t.falling),f()}o(),T(b,(function(){return q(-1)})),T(_,(function(){return q(-1)})),T(w,(function(){return q(1)})),T(x,(function(){return q(1)})),T(y,(function(){return q(1)})),T(v,(function(){t.repeat_shift=-1,t.repeating=!1})),T(g,(function(){t.repeat_shift=1,t.repeating=!1})),T(h,(function(){return t.fall_delay=0})),T(s,(function(){return P()})),T(m,(function(){return t.hold_available&&O()})),T(p,(function(){return t.hold_available&&O()}));var C=setInterval(E,1e3/60);function E(){if(t.repeat_delay>0?t.repeat_delay-=1:(j(v)||j(g))&&M(t.repeat_shift),t.fall_delay>0)t.fall_delay-=1;else if(t.falling){var a,o=S.add(t.falling.position,i);if(l(Object(u["a"])(Object(u["a"])({},t.falling),{},{position:o})))f();else t.falling.position=o,t.fall_delay=d(t.falling)?e.lock_delay:e.fall_delay,j(h)&&(t.fall_delay/=n.soft_drop),t.move_reset=null!==(a=e.move_reset_limit)&&void 0!==a?a:1/0}for(var r=0,c=0;c<e.field_size.y;++c)t.field[c].every((function(e){return null!=e}))&&(t.field.splice(c,1),t.field.unshift(B(e)),r+=1);r>0&&console.log("cleared ".concat(r," lines"))}return{drop_position:r}}function K(e){var n=32,t=1/n,i={field_size:new S(10,40),fall_delay:30,lock_delay:30,move_reset_limit:15,wall_kicks:F,bag_preview:5},a={autoshift:{delay:2,initial_delay:10},soft_drop:10};e.width=(i.field_size.x+12)*n,e.height=i.field_size.y/2*n,e.style.width="".concat(e.width,"px"),e.style.height="".concat(e.height,"px");var o=e.getContext("2d");z(null!=o,"no context");var l=G(i),r=H(i,a,l);function d(e){return e.x<0||e.x>=i.field_size.x||e.y<0||e.y>=i.field_size.y?null:l.field[e.y][e.x]}var s=[new S(-1,-1),new S(0,-1),new S(1,-1),new S(1,0),new S(1,1),new S(0,1),new S(-1,1),new S(-1,0)];function v(e,n,t){var i=n;o.fillStyle=e.color,o.fillRect(i.x,i.y,1,1);var a=1/8;o.beginPath(),o.lineCap="butt",o.lineWidth=a,o.strokeStyle="#00000040";var l,r=[function(){o.moveTo(i.x,i.y+a/2),o.lineTo(i.x+a/2,i.y+a/2),o.lineTo(i.x+a/2,i.y)},function(){o.moveTo(i.x,i.y+a/2),o.lineTo(i.x+1,i.y+a/2)},function(){o.moveTo(i.x+1-a/2,i.y),o.lineTo(i.x+1-a/2,i.y+a/2),o.lineTo(i.x+1,i.y+a/2)},function(){o.moveTo(i.x-a/2+1,i.y),o.lineTo(i.x-a/2+1,i.y+1)},function(){o.moveTo(i.x+1,i.y+1-a/2),o.lineTo(i.x+1-a/2,i.y+1-a/2),o.lineTo(i.x+1-a/2,i.y+1)},function(){o.moveTo(i.x+1,i.y-a/2+1),o.lineTo(i.x,i.y-a/2+1)},function(){o.moveTo(i.x+a/2,i.y+1),o.lineTo(i.x+a/2,i.y+1-a/2),o.lineTo(i.x,i.y+1-a/2)},function(){o.moveTo(i.x+a/2,i.y+1),o.lineTo(i.x+a/2,i.y)}],u=Object(c["a"])(M(t,r));try{for(u.s();!(l=u.n()).done;){var d=Object(f["a"])(l.value,2),s=d[0],v=d[1];s&&v()}}catch(y){u.e(y)}finally{u.f()}o.stroke()}function y(e){var n,t=Object(c["a"])(e.kind.rotations[e.rotation]);try{var i=function(){var t=n.value,i=S.add(e.position,t),a=s.map((function(n){return e.kind.rotations[e.rotation].every((function(e){return!S.eq(e,S.add(t,n))}))}));a&&v(e.kind,i,a)};for(t.s();!(n=t.n()).done;)i()}catch(a){t.e(a)}finally{t.f()}}function p(e,n){var i=S.add(n,new S(-2,-2)),a=S.add(n,new S(2,3*e.length-1));o.lineCap="butt",o.lineJoin="miter",o.strokeStyle="gray",o.beginPath();var l=2*t,r=8*t;o.lineWidth=l,o.moveTo(i.x+l/2,i.y+r),o.lineTo(i.x+l/2,i.y+l/2),o.lineTo(i.x+r,i.y+l/2),o.moveTo(a.x-r,i.y+l/2),o.lineTo(a.x-l/2,i.y+l/2),o.lineTo(a.x-l/2,i.y+r),o.moveTo(a.x-l/2,a.y-r),o.lineTo(a.x-l/2,a.y-l/2),o.lineTo(a.x-r,a.y-l/2),o.moveTo(i.x+r,a.y-l/2),o.lineTo(i.x+l/2,a.y-l/2),o.lineTo(i.x+l/2,a.y-r),o.stroke();var f,u=Object(c["a"])(e);try{for(u.s();!(f=u.n()).done;){var d=f.value,s=L({id:-1,kind:d,position:S.zero,rotation:0}),v=s.reduce((function(e,n){return Math.min(e,n.x)}),1/0)+.5,p=s.reduce((function(e,n){return Math.min(e,n.y)}),1/0)+.5,h=s.reduce((function(e,n){return Math.max(e,n.x)}),-1/0)+.5,g=s.reduce((function(e,n){return Math.max(e,n.y)}),-1/0)+.5,_=new S(-(v+h)/2,-(p+g)/2),b=S.add(n,_);y({id:-1,kind:d,position:b,rotation:0}),n=S.add(n,new S(0,3))}}catch(x){u.e(x)}finally{u.f()}}function h(){requestAnimationFrame(h),o.clearRect(0,0,e.width,e.height),o.save(),o.scale(n,n),o.translate(6,0),l.holding&&(o.save(),l.hold_available||(o.filter="grayscale(100%)"),p([l.holding],new S(-3,3)),o.restore()),i.bag_preview>0&&p(l.fall_queue.slice(0,i.bag_preview),new S(i.field_size.x+3,3)),o.fillStyle="white",o.fillRect(0,0,i.field_size.x,i.field_size.y),o.lineWidth=1*t,o.strokeStyle="#f4f4f4";for(var a=0;a<i.field_size.x;++a)o.beginPath(),o.moveTo(a+.5*t,0),o.lineTo(a+.5*t,i.field_size.y),o.moveTo(a+1-.5*t,0),o.lineTo(a+1-.5*t,i.field_size.y),o.stroke();for(var f=0;f<i.field_size.y;++f)o.beginPath(),o.moveTo(0,f+.5*t),o.lineTo(i.field_size.x,f+.5*t),o.moveTo(0,f+1-.5*t),o.lineTo(i.field_size.x,f+1-.5*t),o.stroke();if(o.translate(0,-i.field_size.y/2),l.falling){y(l.falling),o.save(),o.globalAlpha=.1;var c=r.drop_position(l.falling);y(Object(u["a"])(Object(u["a"])({},l.falling),{},{position:c})),o.restore()}for(var g=0;g<i.field_size.x;++g)for(var _=function(e){var n=l.field[e][g];if(null==n)return"continue";var t=new S(g,e),i=s.map((function(e){var i;return(null===(i=d(S.add(t,e)))||void 0===i?void 0:i.id)!=n.id}));v(l.field[e][g].kind,new S(g,e),i)},b=0;b<i.field_size.y;++b)_(b);o.restore()}requestAnimationFrame(h)}var N={name:"tetris",setup:function(){var e=Object(i["p"])();return Object(i["i"])((function(){K(e.value)})),{canvas:e}}};t("1219"),t("e3cb");N.render=r,N.__scopeId="data-v-77139684";var Q=N;Object(i["d"])(Q).use(a["a"]).mount("#app")},e3cb:function(e,n,t){"use strict";t("cbef")}});
//# sourceMappingURL=index.3e61c1f9.js.map