{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.vue?05cd","webpack:///./src/main.vue","webpack:///./src/input.ts","webpack:///./src/util.ts","webpack:///./src/vec.ts","webpack:///./src/tetris.ts","webpack:///./src/main.vue?7ad1","webpack:///./src/main.ts","webpack:///./src/main.vue?3c14"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","ref","align-center","class","SPACE","LEFT","UP","SHIFT","DOWN","RIGHT","A","Z","S","X","C","Set","listeners","Map","isKeyDown","k","has","onKeyDown","handler","list","set","assert","condition","message","Error","zip","a","b","map","v","addEventListener","e","keyCode","add","item","delete","x","y","Math","sqrt","this","atan2","Vec","polar","dir","scalar","dot","abs","acos","len","cos","sin","define","size","color","raw_tiles","rotation","rotations","define_kick_data","raw","zero","no_kick_data","base_kick_data","base_i_kick_data","asira_i_kick_data","asira_wall_kicks","pieces","kind","position","empty_row","rules","row","field_size","empty_field","field","new_game","falling","fall_queue","fall_delay","move_reset","repeating","repeat_shift","repeat_delay","holding","hold_available","run_game","user","game","down","next_id","new_falling","bag_preview","pool","floor","random","ceil","id","collide","clearInterval","cancel","part","tile","drop_position","bottom","land","is_on_ground","reset_lock_delay","lock_delay","hold","next_fall","unshift","change","autoshift","delay","initial_delay","rotate","kicks","kick_info","wall_kicks","indexOf","kick","hard_drop","setInterval","update","soft_drop","move_reset_limit","Infinity","cleared","every","console","log","tetris","canvas","unit_size","pixel","width","height","style","context","getContext","runner","tile_at","pos","adj8","draw_tile","surroundings","fillStyle","fillRect","border","beginPath","lineCap","lineWidth","strokeStyle","ops","moveTo","lineTo","diff","op","stroke","draw_tetronimo","offset","adj","eq","draw_ui","kinds","center","topleft","botrite","lineJoin","thickness","parts","minX","reduce","min","minY","maxX","max","maxY","tick","requestAnimationFrame","clearRect","save","scale","translate","filter","restore","globalAlpha","setup","render","__scopeId","use","mount"],"mappings":"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","file":"js/index.3e61c1f9.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"index\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./main.vue?vue&type=style&index=0&id=77139684&lang=scss\"","<template>\n  <v-app align-center class=\"pa-6\">\n    <canvas ref=\"canvas\" />\n  </v-app>\n</template>\n\n<script>\nimport { onMounted, shallowRef } from 'vue';\n\nimport { tetris } from './tetris';\n\nexport default {\n  name: 'tetris',\n\n  setup() {\n    let canvas = shallowRef();\n\n    onMounted(() => {\n      tetris(canvas.value);\n    });\n\n    return { canvas };\n  },\n};\n</script>\n\n<style lang=\"scss\">\n#app {\n  width: 100vw;\n  height: 100vh;\n}\n</style>\n\n<style lang=\"scss\" scoped>\ncanvas {\n}\n</style>\n","export const\n  SPACE = 32,\n  ENTER = 13,\n  LEFT = 37,\n  UP = 38,\n  SHIFT = 16,\n  DOWN = 40,\n  RIGHT = 39,\n  A = 65,\n  Z = 90,\n  S = 83,\n  X = 88,\n  C = 67;\n\nlet down = new Set<number>();\nlet listeners = new Map<number, (() => void)[]>();\n\nwindow.addEventListener('keydown', e => {\n  if (down.has(e.keyCode))\n    return;\n\n  // console.log(e.keyCode);\n  down.add(e.keyCode);\n\n  let list = listeners.get(e.keyCode);\n  if (!list) return;\n\n  for (let item of list) {\n    item();\n  }\n});\n\nwindow.addEventListener('keyup', e => {\n  down.delete(e.keyCode);\n});\n\nexport function isKeyDown(k: number) {\n  return down.has(k);\n}\n\nexport function onKeyDown(key: number, handler: () => void) {\n  let list = listeners.get(key);\n  if (!list) listeners.set(key, list = []);\n  list.push(handler);\n}\n","export function assert(condition: boolean, message: string): asserts condition {\n  if (!condition) {\n    debugger;\n    throw new Error(message);\n  }\n}\n\nexport function zip<T1, T2>(a: T1[], b: T2[]): [T1, T2][] {\n  if (a.length != b.length)\n    throw new Error('invalid zip');\n\n  return a.map((v, i) => [v, b[i]]);\n}\n","export class Vec {\n  static zero = new Vec(0, 0);\n\n  constructor(\n    readonly x: number,\n    readonly y: number,\n  ) { }\n\n  get len() {\n    return Math.sqrt(this.x * this.x + this.y * this.y);\n  }\n\n  get dir() {\n    return Math.atan2(this.y, this.x);\n  }\n\n  static norm(a: Vec) {\n    return Vec.polar(1, a.dir);\n  }\n\n  static scale(a: Vec, scalar: number) {\n    return new Vec(a.x * scalar, a.y * scalar);\n  }\n\n  static add(a: Vec, b: Vec) {\n    return new Vec(a.x + b.x, a.y + b.y);\n  }\n\n  static dot(a: Vec, b: Vec) {\n    return a.x * b.x + a.y * b.y;\n  }\n\n  static eq(a: Vec, b: Vec) {\n    return a.x == b.x && a.y == b.y;\n  }\n\n  static delta(a: Vec, b: Vec) {\n    let dot = Vec.dot(a, b);\n    let abs = Math.acos(dot / a.len / b.len);\n    if (a.y * b.x > a.x * b.y)\n      return -abs;\n    return abs;\n  }\n\n  static polar(len: number, dir: number) {\n    return new Vec(\n      Math.cos(dir) * len,\n      Math.sin(dir) * len\n    );\n  }\n}\n","import { A, C, DOWN, isKeyDown, LEFT, onKeyDown, RIGHT, S, SHIFT, SPACE, UP, X, Z } from './input';\nimport { assert, zip } from './util';\nimport { Vec } from './vec';\n\ninterface Tile {\n  id: number;\n  kind: TetronimoKind;\n}\n\ninterface Tetronimo {\n  id: number;\n  kind: TetronimoKind;\n  position: Vec;\n  rotation: number;\n}\n\ninterface TetronimoKind {\n  size: number;\n  color: string;\n  rotations: Vec[][];\n}\n\nfunction define(size: number, color: string, raw_tiles: [number, number][]): TetronimoKind {\n  let rotation = raw_tiles.map(t => new Vec(t[0], t[1]));\n  let rotations = [rotation];\n\n  for (let i = 0; i < 3; ++i) {\n    rotation = rotation.map(v => new Vec(size - 1 - v.y, v.x));\n    rotations.push(rotation);\n  }\n\n  return {\n    size,\n    color,\n    rotations,\n  };\n}\n\nfunction define_kick_data(raw: [number, number][][]) {\n  return raw.map(a => [Vec.zero, ...a.map(a => new Vec(a[0], -a[1]))]);\n}\n\nconst no_kick_data = define_kick_data([\n  [[0, 0]], // 0 -> 1\n  [[0, 0]], // 1 -> 0\n  [[0, 0]], // 1 -> 2\n  [[0, 0]], // 2 -> 1\n  [[0, 0]], // 2 -> 3\n  [[0, 0]], // 3 -> 2\n  [[0, 0]], // 3 -> 0\n  [[0, 0]], // 0 -> 3\n]);\n\nconst base_kick_data = define_kick_data([\n  [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]], // 0 -> 1\n  [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]], // 1 -> 0\n  [[0, 0], [+1, 0], [+1, -1], [0, +2], [+1, +2]], // 1 -> 2\n  [[0, 0], [-1, 0], [-1, +1], [0, -2], [-1, -2]], // 2 -> 1\n  [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]], // 2 -> 3\n  [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]], // 3 -> 2\n  [[0, 0], [-1, 0], [-1, -1], [0, +2], [-1, +2]], // 3 -> 0\n  [[0, 0], [+1, 0], [+1, +1], [0, -2], [+1, -2]], // 0 -> 3\n]);\n\nconst base_i_kick_data = define_kick_data([\n  [[0, 0], [-2, 0], [+1, 0], [-2, -1], [+1, +2]], // 0 -> 1\n  [[0, 0], [+2, 0], [-1, 0], [+2, +1], [-1, -2]], // 1 -> 0\n  [[0, 0], [-1, 0], [+2, 0], [-1, +2], [+2, -1]], // 1 -> 2\n  [[0, 0], [+1, 0], [-2, 0], [+1, -2], [-2, +1]], // 2 -> 1\n  [[0, 0], [+2, 0], [-1, 0], [+2, +1], [-1, -2]], // 2 -> 3\n  [[0, 0], [-2, 0], [+1, 0], [-2, -1], [+1, +2]], // 3 -> 2\n  [[0, 0], [+1, 0], [-2, 0], [+1, -2], [-2, +1]], // 3 -> 0\n  [[0, 0], [-1, 0], [+2, 0], [-1, +2], [+2, -1]], // 0 -> 3\n]);\n\nconst asira_i_kick_data = define_kick_data([\n  [[0, 0], [-2, 0], [+1, 0], [+1, +2], [-2, -1]], // 0 -> 1\n  [[0, 0], [+2, 0], [-1, 0], [+2, +1], [-1, -2]], // 1 -> 0\n  [[0, 0], [-1, 0], [+2, 0], [-1, +2], [+2, -1]], // 1 -> 2\n  [[0, 0], [-2, 0], [+1, 0], [-2, +1], [+1, -1]], // 2 -> 1\n  [[0, 0], [+2, 0], [-1, 0], [+2, +1], [-1, -1]], // 2 -> 3\n  [[0, 0], [+1, 0], [-2, 0], [+1, +2], [-2, -1]], // 3 -> 2\n  [[0, 0], [-2, 0], [+1, 0], [-2, +1], [+1, -2]], // 3 -> 0\n  [[0, 0], [+2, 0], [-1, 0], [-1, +2], [+2, -1]], // 0 -> 3\n]);\n\nconst kinds: TetronimoKind[] = [\n  define(4, '#0f9bd7', [[0, 1], [1, 1], [2, 1], [3, 1]]), // I\n  define(2, '#e39f02', [[0, 0], [0, 1], [1, 0], [1, 1]]), // O\n  define(3, '#af298a', [[1, 0], [0, 1], [1, 1], [2, 1]]), // T\n  define(3, '#2141c6', [[0, 0], [0, 1], [1, 1], [2, 1]]), // J\n  define(3, '#e35b02', [[2, 0], [0, 1], [1, 1], [2, 1]]), // L\n  define(3, '#59b101', [[1, 0], [2, 0], [0, 1], [1, 1]]), // S\n  define(3, '#d70f37', [[0, 0], [1, 0], [1, 1], [2, 1]]), // Z\n];\n\nconst default_wall_kicks = new Map([\n  [kinds[0], base_i_kick_data],\n  [kinds[1], base_kick_data],\n  [kinds[2], base_kick_data],\n  [kinds[3], base_kick_data],\n  [kinds[4], base_kick_data],\n  [kinds[5], base_kick_data],\n  [kinds[6], base_kick_data],\n]);\n\nconst asira_wall_kicks = new Map([\n  [kinds[0], asira_i_kick_data],\n  [kinds[1], base_kick_data],\n  [kinds[2], base_kick_data],\n  [kinds[3], base_kick_data],\n  [kinds[4], base_kick_data],\n  [kinds[5], base_kick_data],\n  [kinds[6], base_kick_data],\n]);\n\nconst no_wall_kicks = new Map([\n  [kinds[0], no_kick_data],\n  [kinds[1], no_kick_data],\n  [kinds[2], no_kick_data],\n  [kinds[3], no_kick_data],\n  [kinds[4], no_kick_data],\n  [kinds[5], no_kick_data],\n  [kinds[6], no_kick_data],\n]);\n\ninterface GameRules {\n  // size of the visible playfield\n  field_size: Vec;\n\n  // updates between the falling piece moving down\n  fall_delay: number;\n  // delay before the falling pieces locks into place\n  lock_delay: number;\n  // limit on how many times rotating or shifting the piece can reset the lock delay. null indicates no limit\n  move_reset_limit: null | number;\n\n  // wall kick data\n  wall_kicks: Map<TetronimoKind, Vec[][]>;\n\n  // number of Tetronimos to pre-generate in the queue\n  bag_preview: 5,\n}\n\ninterface UserConfig {\n  // autoshift information for repeating shifts while input is held\n  autoshift: null | { delay: number, initial_delay: number };\n  // multiplier for fall_delay while soft drop is held\n  soft_drop: number;\n}\n\ninterface GameState {\n  field: (Tile | null)[][],\n\n  falling: Tetronimo | null,\n  fall_queue: TetronimoKind[],\n  fall_delay: number,\n\n  move_reset: number,\n\n  repeating: boolean,\n  repeat_shift: number,\n  repeat_delay: number,\n\n  holding: TetronimoKind | null,\n  hold_available: boolean,\n}\n\n/** get the absolute positions of all the pieces of a tetronimo */\nfunction pieces(t: Tetronimo): Vec[] {\n  return t.kind.rotations[t.rotation]\n    .map(v => Vec.add(t.position, v));\n}\n\n/** create an empty row */\nfunction empty_row(rules: GameRules) {\n  let row = [];\n  for (let x = 0; x < rules.field_size.x; ++x) {\n    row[x] = null;\n  }\n  return row;\n}\n\n/** create an empty field */\nfunction empty_field(rules: GameRules) {\n  let field = [];\n  for (let y = 0; y < rules.field_size.y; ++y) {\n    field[y] = empty_row(rules);\n  }\n  return field;\n}\n\n/** create a new game */\nfunction new_game(rules: GameRules): GameState {\n  return {\n    field: empty_field(rules),\n\n    falling: null,\n    fall_queue: [],\n    fall_delay: 0,\n\n    move_reset: 0,\n\n    repeating: false,\n    repeat_shift: 0,\n    repeat_delay: 0,\n\n    holding: null,\n    hold_available: true,\n  };\n}\n\nfunction run_game(rules: GameRules, user: UserConfig, game: GameState) {\n  const down = new Vec(0, 1);\n  let next_id = 0;\n\n  new_falling();\n\n  /** generate a new falling tetronimo, filling the bag if needed */\n  function new_falling() {\n    if (game.fall_queue.length < rules.bag_preview) {\n      let pool = kinds.slice();\n      while (pool.length > 0) {\n        let i = Math.floor(Math.random() * pool.length);\n        let kind = pool.splice(i, 1)[0];\n        game.fall_queue.push(kind);\n      }\n    }\n\n    let kind = game.fall_queue.shift()!;\n    let position = new Vec(5 - Math.ceil(kind.size / 2), rules.field_size.y / 2 - 2);\n    let rotation = 0;\n\n    game.falling = { id: next_id++, kind, position, rotation };\n    game.hold_available = true;\n    game.fall_delay = 0;\n\n    if (collide(game.falling)) {\n      clearInterval(cancel);\n    }\n  }\n\n  /** detect collisions of a tetronimo with the field, checking contents and borders */\n  function collide(t: Tetronimo) {\n    for (let part of pieces(t)) {\n      if (part.x < 0 || part.x >= rules.field_size.x || part.y >= rules.field_size.y)\n        return true;\n\n      if (part.y < 0)\n        continue;\n\n      let tile = game.field[part.y][part.x];\n      if (tile != null)\n        return true;\n    }\n\n    return false;\n  }\n\n  /** find the position that the tetronimo would hard drop to */\n  function drop_position(t: Tetronimo) {\n    let bottom = t.position;\n    while (true) {\n      let position = Vec.add(bottom, down);\n      if (collide({ ...t, position })) break;\n      bottom = position;\n    }\n\n    return bottom;\n  }\n\n  /** lock down the falling tetronimo */\n  function land() {\n    if (game.falling == null) return false;\n\n    for (let part of pieces(game.falling)) {\n      game.field[part.y][part.x] = {\n        id: game.falling.id,\n        kind: game.falling.kind,\n      };\n    }\n\n    new_falling();\n  }\n\n  /** determine if the falling piece is resting on the ground */\n  function is_on_ground(t: Tetronimo) {\n    let position = Vec.add(t.position, down);\n\n    return collide({ ...t, position });\n  }\n\n  /** reset the lock_delay, consuming a move reset */\n  function reset_lock_delay() {\n    if (game.falling == null) return;\n\n    if (is_on_ground(game.falling) && game.move_reset > 0) {\n      game.move_reset -= 1;\n      game.fall_delay = rules.lock_delay;\n    }\n  }\n\n  /** hold a tetronimo, swapping the held piece out if one exists */\n  function hold() {\n    let next_fall = game.holding;\n    game.holding = game.falling?.kind ?? null;\n\n    if (next_fall) {\n      game.fall_queue.unshift(next_fall);\n    }\n\n    new_falling();\n    game.hold_available = false;\n  }\n\n  /** attempt to shift the falling tetronimo */\n  function shift(change: 1 | -1) {\n    if (game.falling == null) return;\n\n    let position = Vec.add(game.falling.position, new Vec(change, 0));\n    if (!collide({ ...game.falling, position })) {\n      game.falling.position = position;\n\n      if (user.autoshift) {\n        game.repeat_delay = game.repeating\n          ? user.autoshift.delay\n          : user.autoshift.initial_delay;\n\n        game.repeating = true;\n      }\n\n      reset_lock_delay();\n    }\n  }\n\n  /** attempt to rotate the falling tetronimo */\n  function rotate(change: 1 | -1) {\n    if (game.falling == null) return;\n\n    let rotation = (game.falling.rotation + change) % 4;\n    if (rotation < 0) rotation += 4;\n\n    let kick_info = rules.wall_kicks.get(game.falling.kind);\n    assert(kick_info != null, `no kick info for piece ${kinds.indexOf(game.falling.kind)}`);\n\n    let kicks;\n    if (change == 1)\n      kicks = kick_info[game.falling.rotation * 2];\n    else\n      kicks = kick_info[rotation * 2 + 1];\n\n    for (let kick of kicks) {\n      let position = Vec.add(game.falling.position, kick)\n\n      if (!collide({ ...game.falling, position, rotation })) {\n        game.falling.position = position;\n        game.falling.rotation = rotation;\n        reset_lock_delay();\n        return;\n      }\n    }\n  }\n\n  /** hard drop the falling tetronimo */\n  function hard_drop() {\n    if (game.falling == null) return false;\n    game.falling.position = drop_position(game.falling);\n    land();\n  }\n\n  onKeyDown(Z, () => rotate(-1));\n  onKeyDown(A, () => rotate(-1));\n  onKeyDown(X, () => rotate(1));\n  onKeyDown(S, () => rotate(1));\n  onKeyDown(UP, () => rotate(1));\n\n  onKeyDown(LEFT, () => { game.repeat_shift = -1; game.repeating = false; });\n  onKeyDown(RIGHT, () => { game.repeat_shift = 1; game.repeating = false; });\n  onKeyDown(DOWN, () => game.fall_delay = 0);\n\n  onKeyDown(SPACE, () => hard_drop());\n\n  onKeyDown(C, () => game.hold_available && hold());\n  onKeyDown(SHIFT, () => game.hold_available && hold());\n\n  let cancel = setInterval(update, 1000 / 60);\n  function update() {\n    if (game.repeat_delay > 0) {\n      game.repeat_delay -= 1;\n    } else if (isKeyDown(LEFT) || isKeyDown(RIGHT)) {\n      shift(game.repeat_shift as 1 | -1);\n    }\n\n    if (game.fall_delay > 0) {\n      game.fall_delay -= 1;\n    } else if (game.falling) {\n      let position = Vec.add(game.falling.position, down);\n      if (!collide({ ...game.falling, position })) {\n        game.falling.position = position;\n\n        game.fall_delay = is_on_ground(game.falling)\n          ? rules.lock_delay\n          : rules.fall_delay;\n\n        if (isKeyDown(DOWN))\n          game.fall_delay /= user.soft_drop;\n\n        game.move_reset = rules.move_reset_limit ?? Infinity;\n      } else {\n        land();\n      }\n    }\n\n    let cleared = 0;\n    for (let y = 0; y < rules.field_size.y; ++y) {\n      if (game.field[y].every(t => t != null)) {\n        game.field.splice(y, 1);\n        game.field.unshift(empty_row(rules));\n        cleared += 1;\n      }\n    }\n\n    if (cleared > 0) {\n      console.log(`cleared ${cleared} lines`);\n    }\n  }\n\n  return { drop_position };\n}\n\nexport function tetris(canvas: HTMLCanvasElement) {\n  const unit_size = 32;\n  const pixel = 1 / unit_size;\n\n  const rules: GameRules = {\n    field_size: new Vec(10, 40),\n    fall_delay: 30,\n    lock_delay: 30,\n    move_reset_limit: 15,\n\n    wall_kicks: asira_wall_kicks,\n\n    bag_preview: 5,\n  };\n\n  const user: UserConfig = {\n    autoshift: { delay: 2, initial_delay: 10 },\n    soft_drop: 10,\n  };\n\n  canvas.width = (rules.field_size.x + 12) * unit_size;\n  canvas.height = (rules.field_size.y / 2) * unit_size;\n  canvas.style.width = `${canvas.width}px`;\n  canvas.style.height = `${canvas.height}px`;\n\n  const context = canvas.getContext('2d')!;\n  assert(context != null, 'no context');\n\n  const game = new_game(rules);\n  const runner = run_game(rules, user, game);\n\n  function tile_at(pos: Vec) {\n    if (pos.x < 0 || pos.x >= rules.field_size.x\n      || pos.y < 0 || pos.y >= rules.field_size.y)\n      return null;\n\n    return game.field[pos.y][pos.x];\n  }\n\n  const adj8 = [\n    new Vec(-1, -1),\n    new Vec(0, -1),\n    new Vec(1, -1),\n    new Vec(1, 0),\n    new Vec(1, 1),\n    new Vec(0, 1),\n    new Vec(-1, 1),\n    new Vec(-1, 0),\n  ];\n\n  /** draw a single tile of a tetronimo */\n  function draw_tile(kind: TetronimoKind, position: Vec, surroundings: boolean[]) {\n    let p = position;\n\n    context.fillStyle = kind.color;\n    context.fillRect(p.x, p.y, 1, 1);\n\n    const border = 1 / 8;\n\n    context.beginPath();\n    context.lineCap = 'butt';\n    context.lineWidth = border;\n    context.strokeStyle = '#00000040';\n\n    let ops = [\n      () => {\n        context.moveTo(p.x, p.y + border / 2);\n        context.lineTo(p.x + border / 2, p.y + border / 2);\n        context.lineTo(p.x + border / 2, p.y);\n      },\n\n      () => {\n        context.moveTo(p.x, p.y + border / 2);\n        context.lineTo(p.x + 1, p.y + border / 2);\n      },\n\n      () => {\n        context.moveTo(p.x + 1 - border / 2, p.y);\n        context.lineTo(p.x + 1 - border / 2, p.y + border / 2);\n        context.lineTo(p.x + 1, p.y + border / 2);\n      },\n\n      () => {\n        context.moveTo(p.x - border / 2 + 1, p.y);\n        context.lineTo(p.x - border / 2 + 1, p.y + 1);\n      },\n\n      () => {\n        context.moveTo(p.x + 1, p.y + 1 - border / 2);\n        context.lineTo(p.x + 1 - border / 2, p.y + 1 - border / 2);\n        context.lineTo(p.x + 1 - border / 2, p.y + 1);\n      },\n\n      () => {\n        context.moveTo(p.x + 1, p.y - border / 2 + 1);\n        context.lineTo(p.x, p.y - border / 2 + 1);\n      },\n\n      () => {\n        context.moveTo(p.x + border / 2, p.y + 1);\n        context.lineTo(p.x + border / 2, p.y + 1 - border / 2);\n        context.lineTo(p.x, p.y + 1 - border / 2);\n      },\n\n      () => {\n        context.moveTo(p.x + border / 2, p.y + 1);\n        context.lineTo(p.x + border / 2, p.y);\n      },\n    ];\n\n    for (let [diff, op] of zip(surroundings, ops)) {\n      if (diff) op();\n    }\n\n    context.stroke();\n  }\n\n  /** draw a a tetronimo */\n  function draw_tetronimo(t: Tetronimo) {\n    for (let offset of t.kind.rotations[t.rotation]) {\n      let position = Vec.add(t.position, offset);\n\n      let diff = adj8.map(adj =>\n        t.kind.rotations[t.rotation]\n          .every(v => !Vec.eq(v, Vec.add(offset, adj)))\n      );\n\n      if (diff) draw_tile(t.kind, position, diff);\n    }\n  }\n\n  /** draw a tetronimo in the UI */\n  function draw_ui(kinds: TetronimoKind[], center: Vec) {\n    let topleft = Vec.add(center, new Vec(-2, -2));\n    let botrite = Vec.add(center, new Vec(2, -1 + 3 * kinds.length));\n\n    context.lineCap = 'butt';\n    context.lineJoin = 'miter';\n    context.strokeStyle = 'gray'\n    context.beginPath();\n\n    const thickness = 2 * pixel;\n    const length = 8 * pixel;\n\n    context.lineWidth = thickness;\n\n    context.moveTo(topleft.x + thickness / 2, topleft.y + length);\n    context.lineTo(topleft.x + thickness / 2, topleft.y + thickness / 2);\n    context.lineTo(topleft.x + length, topleft.y + thickness / 2);\n\n    context.moveTo(botrite.x - length, topleft.y + thickness / 2);\n    context.lineTo(botrite.x - thickness / 2, topleft.y + thickness / 2);\n    context.lineTo(botrite.x - thickness / 2, topleft.y + length);\n\n    context.moveTo(botrite.x - thickness / 2, botrite.y - length);\n    context.lineTo(botrite.x - thickness / 2, botrite.y - thickness / 2);\n    context.lineTo(botrite.x - length, botrite.y - thickness / 2);\n\n    context.moveTo(topleft.x + length, botrite.y - thickness / 2);\n    context.lineTo(topleft.x + thickness / 2, botrite.y - thickness / 2);\n    context.lineTo(topleft.x + thickness / 2, botrite.y - length);\n\n    context.stroke();\n\n    for (let kind of kinds) {\n      let parts = pieces({ id: -1, kind, position: Vec.zero, rotation: 0 });\n\n      let minX = parts.reduce((m, v) => Math.min(m, v.x), Infinity) + 0.5;\n      let minY = parts.reduce((m, v) => Math.min(m, v.y), Infinity) + 0.5;\n      let maxX = parts.reduce((m, v) => Math.max(m, v.x), -Infinity) + 0.5;\n      let maxY = parts.reduce((m, v) => Math.max(m, v.y), -Infinity) + 0.5;\n\n      let offset = new Vec(-(minX + maxX) / 2, -(minY + maxY) / 2);\n      let position = Vec.add(center, offset);\n\n      draw_tetronimo({ id: -1, kind, position, rotation: 0 });\n\n      center = Vec.add(center, new Vec(0, 3));\n    }\n  }\n\n  requestAnimationFrame(tick);\n  function tick() {\n    requestAnimationFrame(tick);\n\n    context.clearRect(0, 0, canvas.width, canvas.height);\n    context.save();\n\n    context.scale(unit_size, unit_size);\n    context.translate(6, 0);\n\n    if (game.holding) {\n      context.save();\n      if (!game.hold_available)\n        context.filter = 'grayscale(100%)';\n\n      draw_ui([game.holding], new Vec(-3, 3));\n      context.restore();\n    }\n\n    if (rules.bag_preview > 0) {\n      draw_ui(game.fall_queue.slice(0, rules.bag_preview), new Vec(rules.field_size.x + 3, 3));\n    }\n\n    context.fillStyle = 'white';\n    context.fillRect(0, 0, rules.field_size.x, rules.field_size.y);\n\n    context.lineWidth = 1 * pixel;\n    context.strokeStyle = '#f4f4f4';\n    for (let x = 0; x < rules.field_size.x; ++x) {\n      context.beginPath();\n      context.moveTo(x + 0.5 * pixel, 0);\n      context.lineTo(x + 0.5 * pixel, rules.field_size.y);\n      context.moveTo((x + 1) - 0.5 * pixel, 0);\n      context.lineTo((x + 1) - 0.5 * pixel, rules.field_size.y);\n      context.stroke();\n    }\n\n    for (let y = 0; y < rules.field_size.y; ++y) {\n      context.beginPath();\n      context.moveTo(0, y + 0.5 * pixel);\n      context.lineTo(rules.field_size.x, y + 0.5 * pixel);\n      context.moveTo(0, (y + 1) - 0.5 * pixel);\n      context.lineTo(rules.field_size.x, (y + 1) - 0.5 * pixel);\n      context.stroke();\n    }\n\n    context.translate(0, -rules.field_size.y / 2);\n\n    if (game.falling) {\n      draw_tetronimo(game.falling);\n\n      context.save();\n      context.globalAlpha = 0.10;\n\n      let position = runner.drop_position(game.falling);\n      draw_tetronimo({ ...game.falling, position });\n\n      context.restore();\n    }\n\n    for (let x = 0; x < rules.field_size.x; ++x) {\n      for (let y = 0; y < rules.field_size.y; ++y) {\n        let t = game.field[y][x];\n        if (t == null) continue;\n\n        let position = new Vec(x, y);\n\n        let diff = adj8.map(adj => tile_at(Vec.add(position, adj))?.id != t!.id);\n\n        draw_tile(game.field[y][x]!.kind, new Vec(x, y), diff);\n      }\n    }\n\n    context.restore();\n  }\n}\n","import { render } from \"./main.vue?vue&type=template&id=77139684&scoped=true\"\nimport script from \"./main.vue?vue&type=script&lang=js\"\nexport * from \"./main.vue?vue&type=script&lang=js\"\n\nimport \"./main.vue?vue&type=style&index=0&id=77139684&lang=scss\"\nimport \"./main.vue?vue&type=style&index=1&id=77139684&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-77139684\"\n\nexport default script","import { createApp } from 'vue'\nimport { framework } from '@mfro/vue-ui';\n\nimport root from './main.vue'\n\ncreateApp(root)\n  .use(framework)\n  .mount('#app')\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../node_modules/vue-loader-v16/dist/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./main.vue?vue&type=style&index=1&id=77139684&lang=scss&scoped=true\""],"sourceRoot":""}